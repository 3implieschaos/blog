<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>doctimjones</title><link href="http://doctimjones.org/" rel="alternate"></link><link href="http://doctimjones.org/feeds/all.atom.xml" rel="self"></link><id>http://doctimjones.org/</id><updated>2017-02-04T23:27:00-05:00</updated><entry><title>Using Docker-Sparker to get a quick out-of-the-box Cloud9 IDE/Jupyter/Spark/Pandas/etc. experience</title><link href="http://doctimjones.org/using-docker-sparker-to-get-a-quick-out-of-the-box-cloud9-idejupytersparkpandasetc-experience.html" rel="alternate"></link><published>2017-02-04T23:27:00-05:00</published><updated>2017-02-04T23:27:00-05:00</updated><author><name>Tim Jones</name></author><id>tag:doctimjones.org,2017-02-04:using-docker-sparker-to-get-a-quick-out-of-the-box-cloud9-idejupytersparkpandasetc-experience.html</id><summary type="html">&lt;h3&gt;Background&lt;/h3&gt;
&lt;p&gt;Jupiter notebooks (iPython notebooks) is a
convenient and powerful tools for research.
Setting up an entire workstation with all
the right packages, and extras such as Spark,
can be a steep hill to climb. This entry
shows you how to use docker-sparker to
quickly get a workstation up and running
so that you can focus on the more interesting
task of research. This workstation will come packed
With many great Python tools and a Cloud 9 IDE interface.&lt;/p&gt;
&lt;h3&gt;Getting up and running&lt;/h3&gt;
&lt;h4&gt;Quick overview&lt;/h4&gt;
&lt;p&gt;First you will need to &lt;a href="https://docs.docker.com/engine/installation/"&gt;install Docker&lt;/a&gt;
on your workstation. That is pretty easy to do.
You will also need to &lt;a href="https://docs.docker.com/compose/install/"&gt;install docker-compose&lt;/a&gt;.
I would highly recommend you install docker-compose
from the official installation instructions &lt;a href="https://docs.docker.com/compose/install/"&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;If this is good enough to get you started, then you can
skip the next section.&lt;/p&gt;
&lt;h4&gt;Working remote-install example: Google Compute Engine&lt;/h4&gt;
&lt;p&gt;In this example we will demonstrate how to install
Docker on a Google cloud VM. We will take it step by step.
We will create a Linux VM in Google's Compute Engine cloud,
run the docker-sparker container on it, and use ssh tunnel
to securely connect to our notebook. The result will be that
can do powerful computations on light laptops, e.g. the
Macbook 12" by treating your workstation as a front end
interface for your more powerful backend server which is
hosted in the cloud.&lt;/p&gt;
&lt;h5&gt;Starting your VM&lt;/h5&gt;
&lt;blockquote&gt;
&lt;p&gt;Warning! If you follow these steps, you will get a charge from Google, launching a virtual machine in Google's cloud is a paid service. You can use docker-sparker without paying, of course, if your laptop is powerful enough (you have 2gb of RAM free).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Navigate to the &lt;a href="https://cloud.google.com/compute/"&gt;Google Compute Engine Console&lt;/a&gt;. You'll want to
be logged into your Google Account. The VM you launch
will be tied to your Google Account such that you can ssh
into it from your webrowser by being logged into your account.&lt;/li&gt;
&lt;li&gt;Click on "View My Console" (you may have to go through some sign up processes first).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="view console" src="assets/JupyterHowTo-a9b80.png" /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Select "Create Instance":&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="create instance" src="assets/JupyterHowTo-876fe.png" /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;In the next menu, you can customize what size of VM you'd like:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="view console" src="assets/JupyterHowTo-4ac03.png" /&gt;&lt;/p&gt;
&lt;p&gt;The great thing here is that Google will give you a price
estimate so you can select various configurations of vCPU/RAM.
For this project, two CPUs should be enough for many purposes.
It is vCPU that drives the cost, and you can customize and
increase the RAM size without greatly increasing the cost.
* The default disk size of 10GB and standard disk is not
recommended, I'd suggest upgrading to 15GB SSD if you
anticipate having larger data sets. Click on the "change"
button in the Boot disk section and select Ubuntu 16.04
and change the disk type to SSD and the size to what you
feel will work best for you:&lt;/p&gt;
&lt;p&gt;&lt;img alt="disk size" src="assets/JupyterHowTo-b5163.png" /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Finally, hit create to create your new VM. The meter starts
running and your billing will begin.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="select create" src="assets/JupyterHowTo-fa523.png" /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;You will be taken to a VM dashboard:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="vm menu" src="assets/JupyterHowTo-8cfa1.png" /&gt;&lt;/p&gt;
&lt;p&gt;Click on SSH and a window will pop up with a built-in ssh
terminal:&lt;/p&gt;
&lt;p&gt;&lt;img alt="ssh terminal" src="assets/JupyterHowTo-1d081.png" /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Now we can install Docker! First, let's update our
system:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get update
sudo apt-get upgrade
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;Next follow the official Docker advised steps to install
Docker in Ubuntu 16.04: &lt;a href="https://docs.docker.com/engine/installation/linux/ubuntu/"&gt;here&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;And then for Docker compose: &lt;a href="https://docs.docker.com/compose/install/"&gt;here&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We are ready to join the main instructions for installing docker-sparker, but first a note about connecting to your Cloud 9 IDE and Jupyter notebook from your cloud VM. You can do this in two ways. You can manipulate the firewall for your VM
and allow ports 9999 and 18888 to be open to your IP address.
If you share your IP address with others, I do not suggest
you go that route. The alternative is to SSH tunnel into
your instance to allow a secure connection. If you are on a
Linux or Mac workstation, you are in great luck and ssh
is easy to get access to. If you are using Windows, you'll
need to install an SSH client of your choice or if you have
Windows 10 Pro, Linux Userspace for Windows is an option for
ssh out of the box.&lt;/p&gt;
&lt;p&gt;Opening a terminal, you would create a key pair, if you don't
already have one:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ssh-keygen -t rsa
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and follow those prompts. You will then want to copy the
contents of your public key (you can easily see that from
the comand line by running &lt;code&gt;cat ~/.ssh/id_rsa.pub&lt;/code&gt;) and
place that inside a file on the VM server located at
&lt;code&gt;~/.ssh/authorized_keys&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img alt="authorized keys" src="assets/JupyterHowTo-b2eaa.png" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;nano ~/.ssh/authorized_keys&lt;/code&gt; and scroll down to the
bottom to make a new line and paste your &lt;code&gt;id_rsa.pub&lt;/code&gt;
contents and then &lt;code&gt;Cntrl-x&lt;/code&gt; to save. One last thing
before we are ready to go: get the ip address of your
VM. This is not going to be guaranteed to be static
unless you pay a little extra for a static IP, but you'll
find that it doesn't change very much. From the VM ssh
window run &lt;code&gt;curl ifconfig.io&lt;/code&gt; and that is your new IP.
Let's say your IP is 8.8.8.8 (it own't be but just for
the sake of the walkthrough we will pretend it is).
Then, from you workstation, launch a tunnel into your VM&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;L&lt;/span&gt; &lt;span class="mi"&gt;9999&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="nl"&gt;localhost&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;9999&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;L&lt;/span&gt; &lt;span class="mi"&gt;18888&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="nl"&gt;localhost&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;18888&lt;/span&gt; &lt;span class="n"&gt;username&lt;/span&gt;&lt;span class="mf"&gt;@8.8.8.8&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;where username is the username of your workstation that
can be found on the left of the &lt;code&gt;@&lt;/code&gt; symbol in your ssh
window command prompt line (the part blurred below):&lt;/p&gt;
&lt;p&gt;&lt;img alt="get username" src="assets/JupyterHowTo-b1678.png" /&gt;&lt;/p&gt;
&lt;p&gt;What this does is &lt;em&gt;tunnel&lt;/em&gt; the ports that docker-sparker will
be using to serve Cloud 9 IDE (9999) and Jupyter notebook
(18888) through your SSH connection such that you can access
the ports at &lt;em&gt;localhost&lt;/em&gt; rather than remotely. That is,
instead of pointing your browser at:&lt;/p&gt;
&lt;p&gt;&lt;a href=""&gt;http://YOUR.VM.IP:18888&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;you will point to&lt;/p&gt;
&lt;p&gt;&lt;a href="http://localhost:18888"&gt;http://localhost:18888&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;which will point to the port tunneled locally.&lt;/p&gt;
&lt;h4&gt;Getting docker-sparker up and running&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Install git on the machine you want to be running
docker-sparker on. On a linux machine:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get install git
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;Clone the docker-sparker repo:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git clone https://github.com/doctimjones/docker-sparker.git
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;Move into the workstation directory:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cd docker-sparker/workstation-container
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;Modify the &lt;code&gt;docker-compose.yaml&lt;/code&gt; file as you'd like,
in particular, you'll want to point it to a workspace.
If you use the default, create a &lt;code&gt;scratch&lt;/code&gt; folder
(&lt;code&gt;mdkir ~/scratch&lt;/code&gt;):&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;version: &amp;#39;2&amp;#39;
services:
  workstation:
    build:
      context: ../workstation-container/
    ports:
     - &amp;quot;127.0.0.1:9999:9999&amp;quot;
     - &amp;quot;127.0.0.1:18888:8888&amp;quot;
    depends_on:
     - spark-base
    image: workstation-container
    volumes:
     - $HOME/scratch:/usr/local/develop
     - $HOME/.ssh:/root/.ssh
     - $HOME/.aws:/root/.aws
     - $HOME/.config:/root/.config
     - $HOME/.gitconfig:/root/.gitconfig
  spark-base:
    build:
      context: ../base-container/
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If you are using an ssh tunnel to connect or running it on
your local workstation, the ports configuration in the above
yaml works fine; if you are going to be connecting remotely
and opening firewall ports, then remove the "127.0.0.1:"
prefix on the ports entries.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Docker and UFW warning: If you are using UFW to set your
firewall on your machine on Ubuntu 16.04, Docker will override
UFW and leave ports 9999 and 18888 open to the world even if you
block them with UFW. You can fix this behavior by creating
the file &lt;code&gt;/etc/docker/daemon.json&lt;/code&gt; with contents &lt;code&gt;{
    "iptables": false
}&lt;/code&gt; and restarting Docker and UFW.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Run &lt;code&gt;docker-compose up -d&lt;/code&gt;. This will take quite a bit of time
to build, possibly up to an hour or more depending on your system
capacity.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Once it has successfully built the containers and started them,
you can now access your Cloud 9 IDE at:&lt;/p&gt;
&lt;p&gt;&lt;a href="http://localhost:9999"&gt;http://localhost:9999&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;and your Jupyter notebook at&lt;/p&gt;
&lt;p&gt;&lt;a href="http://localhost:18888"&gt;http://localhost:18888&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;If you are using a remote host, simply replace &lt;code&gt;localhost&lt;/code&gt; in
the links above with that hosts FQDN or IP Address.&lt;/p&gt;
&lt;p&gt;You should see a Cloud 9 IDE at &lt;a href="http://localhost:9999"&gt;http://localhost:9999&lt;/a&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img alt="cloud9" src="assets/JupyterHowTo-33389.png" /&gt;&lt;/p&gt;
&lt;p&gt;and a Jupyter notebook at &lt;a href="http://localhost:18888"&gt;http://localhost:18888&lt;/a&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img alt="jupyter" src="assets/JupyterHowTo-22dfd.png" /&gt;&lt;/p&gt;
&lt;p&gt;Now do some great development and research!&lt;/p&gt;</summary><category term="DevOps"></category><category term="Python"></category><category term="Data Science"></category><category term="Docker"></category><category term="Spark"></category><category term="Cloud 9 IDE"></category><category term="Jupyter"></category><category term="Pandas"></category><category term="Google Compute"></category><category term="SSH"></category></entry><entry><title>Bize sized stochastic control theory</title><link href="http://doctimjones.org/bize-sized-stochastic-control-theory.html" rel="alternate"></link><published>2017-01-31T20:27:00-05:00</published><updated>2017-01-31T20:27:00-05:00</updated><author><name>Tim Jones</name></author><id>tag:doctimjones.org,2017-01-31:bize-sized-stochastic-control-theory.html</id><summary type="html">&lt;p&gt;WORK IN PROGRESS...&lt;/p&gt;
&lt;h3&gt;Theory vs. on the ground&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;Deterministic&lt;/em&gt; and &lt;em&gt;stochastic&lt;/em&gt; control theory both approach the same general problem of
preventing unwanted behaviors of a system by controlling input variables. The deterministic
variation assumes everything is known or at least knowable and predictable in such a way that
given a snapshot of a system, with the proper analysis and with the proper system (i.e. a
system which &lt;em&gt;can&lt;/em&gt; be controlled, doesn't have catastrophe points) we can control it in
perpetuity. &lt;strong&gt;Stochastic&lt;/strong&gt; control theory essentially expands control theory to deal with
systems which have real-world behavior-that is, systems which do not behave ideally and
are subject to random variations in behavior (though those variations are perturbations
to an otherwise systematic behavior). Here, we take a quick bite-sized look at an example.&lt;/p&gt;
&lt;h4&gt;An example&lt;/h4&gt;
&lt;p&gt;Take a look at the system defined by&lt;/p&gt;
&lt;div class="math"&gt;$$\frac{dx}{dt} = u$$&lt;/div&gt;
&lt;div class="math"&gt;$$x(0) = 1$$&lt;/div&gt;
&lt;p&gt;where we seek to minimize the function&lt;/p&gt;
&lt;div class="math"&gt;$$J = \int^{\infty}_0 \left[ x^2(t) + u^2(t)\right] dt$$&lt;/div&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;h5&gt;What does it correspond to?&lt;/h5&gt;
&lt;p&gt;Firstly, it is important to understand that &lt;span class="math"&gt;\(u\)&lt;/span&gt; is not necessarily a constant. In fact, if &lt;span class="math"&gt;\(J\)&lt;/span&gt; is
somehow an expression of some idealized behavior, (e.g. minimize polution output), then choosing
&lt;span class="math"&gt;\(u\)&lt;/span&gt; to be a constant would be a very bad idea as &lt;span class="math"&gt;\(J \rightarrow \infty\)&lt;/span&gt;.&lt;/p&gt;
&lt;h5&gt;Finding u&lt;/h5&gt;
&lt;p&gt;So let's now try to find a &lt;span class="math"&gt;\(u\)&lt;/span&gt; that would minimize &lt;span class="math"&gt;\(J\)&lt;/span&gt;. First, re-write &lt;span class="math"&gt;\(J\)&lt;/span&gt; as&lt;/p&gt;
&lt;div class="math"&gt;$$J = \int^{\infty}_0 \left[ x^2(t) + u^2(t) \right] dt$$&lt;/div&gt;
&lt;p&gt;and then we note that&lt;/p&gt;
&lt;div class="math"&gt;$$\int^{T}_0 \left[ x^2(t) + u^2(t) \right] dt = x^2(0) - x^2(T) + \int^{T}_0 \left[ x(t) + \dot{x}(t) \right]^2 dt$$&lt;/div&gt;
&lt;p&gt;Let's find the minima of this with respect to &lt;span class="math"&gt;\(d/d(\dot{x})\)&lt;/span&gt;, setting the result to zero, to find that&lt;/p&gt;
&lt;div class="math"&gt;$$x(t) = - \dot{x}(t)$$&lt;/div&gt;
&lt;p&gt;We can look at this as an open loop control, such that we solve to find that&lt;/p&gt;
&lt;div class="math"&gt;$$u(t) = -e^{-t}$$&lt;/div&gt;
&lt;p&gt;and then somehow find a way to design the system to obey this function. Or we can treat it as a closed loop control
and use&lt;/p&gt;
&lt;div class="math"&gt;$$\dot{x}{t} = -x(t)$$&lt;/div&gt;
&lt;p&gt;,&lt;/p&gt;
&lt;p&gt;e.g. using a simple Eulerian integration for the sake of argument, the system can be best controlled by changing parameter &lt;span class="math"&gt;\(x\)&lt;/span&gt; at time &lt;span class="math"&gt;\(t\)&lt;/span&gt; as dictated by the relation:&lt;/p&gt;
&lt;div class="math"&gt;$$\delta x = -x(t) \delta t$$&lt;/div&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;h5&gt;What is the difference?&lt;/h5&gt;
&lt;p&gt;For a deterministic system, the exponent we found for &lt;span class="math"&gt;\(u\)&lt;/span&gt; seems like a great solution &lt;strong&gt;if&lt;/strong&gt; it can be
designed into the system. But what happens if we have stochastic noise?&lt;/p&gt;
&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width &lt; 768) ? "left" : align;
        indent = (screen.width &lt; 768) ? "0em" : indent;
        linebreak = (screen.width &lt; 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    var location_protocol = (false) ? 'https' : document.location.protocol;
    if (location_protocol !== 'http' &amp;&amp; location_protocol !== 'https') location_protocol = 'https:';
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = location_protocol + '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' }, Macros: {} }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;</summary><category term="Control Theory"></category><category term="Stochastic"></category><category term="Python"></category></entry><entry><title>AWS Virtual Machines, cook thyself! Part I</title><link href="http://doctimjones.org/aws-virtual-machines-cook-thyself-part-i.html" rel="alternate"></link><published>2017-01-28T17:00:00-05:00</published><updated>2017-01-28T17:00:00-05:00</updated><author><name>Tim Jones</name></author><id>tag:doctimjones.org,2017-01-28:aws-virtual-machines-cook-thyself-part-i.html</id><summary type="html">&lt;h3&gt;Motivation&lt;/h3&gt;
&lt;p&gt;Cloudformation offers a nice solution to orchestrating infrastructure deployment, but has its limitations. Its built in method for deployment scripts, "User Data", is difficult to maintain and unwieldy for more complicated systems. This walkthrough tutorial shows you how you can use chef, AWS KMS, and AWS Cloudformation together to get the best of both worlds--full automation with Cloudformation coupled with Chef's configuration management. &lt;/p&gt;
&lt;p&gt;In Part I, we create a chef cookbook to install the Cloud 9 IDE development package on a server.&lt;/p&gt;
&lt;p&gt;In Part II, we do the same thing using Puppet.&lt;/p&gt;
&lt;p&gt;In Part III, we demonstrate how to use Cloudformation to have boxes spin up in AWS and automatically cook themselves using either of these provisioning methods.&lt;/p&gt;
&lt;h5&gt;(why not use Opsworks instead)?&lt;/h5&gt;
&lt;p&gt;Opsworks is limiting in some ways that many, including myself, feel does not permit the full use of Chef. This solution cuts out Opsworks as the middle-man, so to speak, and leverages the full power of chef-solo automatically.&lt;/p&gt;
&lt;h2&gt;Part I: Quick Chef Walkthrough&lt;/h2&gt;
&lt;h3&gt;Yet another chef tutorial&lt;/h3&gt;
&lt;p&gt;You can of course skip this step if you are familiar with Chef to a great enough degree, but in the spirit of making this a self-contained walkthrough, we will start from the ground up.&lt;/p&gt;
&lt;h4&gt;Getting started&lt;/h4&gt;
&lt;h5&gt;Installing ChefDK&lt;/h5&gt;
&lt;p&gt;It is widely considered best practice to use &lt;a href="https://downloads.chef.io/chefdk"&gt;ChefDK&lt;/a&gt;, and this walkthrough uses ChefDK exclusively.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;On Mac, install &lt;a href="http://brew.sh/"&gt;HomeBrew&lt;/a&gt; and run &lt;code&gt;brew cask install chefdk&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;On Linux, &lt;a href="https://downloads.chef.io/chefdk"&gt;download a package&lt;/a&gt; corresponding to your distro and install accordingly.&lt;/li&gt;
&lt;li&gt;On Windows: Run Linux as a Virtual Machine, get Docker for Windows, or &lt;em&gt;try&lt;/em&gt; using Bash on Windows, but this walkthrough doesn't support Windows-based development. &lt;/li&gt;
&lt;/ul&gt;
&lt;h5&gt;Initiating your cookbook&lt;/h5&gt;
&lt;p&gt;Let's start with the following command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;chef generate cookbook c9_ide_chef
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This command generates a template for a cookbook. Note that we use and underline in the name instead of a hyphen as hyphens can be problematic for chef in some circumstances. We now have a folder with the following content:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;├── .gitignore
├── .kitchen.yml
├── Berksfile
├── README.md
├── chefignore
├── metadata.rb
├── recipes
│   └── default.rb
├── spec
│   ├── spec_helper.rb
│   └── unit
│       └── recipes
│           └── default_spec.rb
└── test
    └── smoke
        └── default
            └── default_test.rb
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;It also  creates a &lt;code&gt;.delivery&lt;/code&gt; and a &lt;code&gt;.git&lt;/code&gt; folder whose contents are omitted here for clarity. &lt;/p&gt;
&lt;p&gt;The second command creates an attribute folder which we can populate with default attributes for our cookbook, and the third line creates a default template for a "message of the day" to be displayed when first logging in. &lt;/p&gt;
&lt;p&gt;The &lt;code&gt;.git&lt;/code&gt; directory is useful and we will use it as the basis for a new repo in github repo. &lt;/p&gt;
&lt;h5&gt;Pushing to GitHub&lt;/h5&gt;
&lt;p&gt;Now that we have the skeleton for our cookbook, we should start pushing to GitHub for version-control. On GitHub, create a public repo called c9_ide. Then run the following commands:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git add .
git commit -m &amp;quot;First commit&amp;quot;
git remote add origin git@github.com:YOUR_GITHUB_USERNAME/c9_ide_chef.git
git push -u origin master
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now the stage is set and we are ready to make the cookbook actually do something.&lt;/p&gt;
&lt;h4&gt;Create the core configuration&lt;/h4&gt;
&lt;h5&gt;Creating a story for the cookbook&lt;/h5&gt;
&lt;p&gt;So far we've seen how to set up the cookbook, but we don't quite know what we are going to do with it. Now is a good time to set up some goals for our cookbook:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;It should update all packages before doing anything else&lt;/li&gt;
&lt;li&gt;It should create a message of the day that gives basic information about the server to a user logging in&lt;/li&gt;
&lt;li&gt;It should install basic security packages and other utilities&lt;/li&gt;
&lt;li&gt;It should install the packages needed to run Cloud 9 IDE&lt;/li&gt;
&lt;li&gt;It should pull and install Cloud 9 IDE&lt;/li&gt;
&lt;/ul&gt;
&lt;h6&gt;Updating all packages&lt;/h6&gt;
&lt;p&gt;Just for fun, we are going to make our cookbook work for both Debian and RHEL variations of Linux. Under the recipes folder, let's create a recipe file called &lt;code&gt;update.rb&lt;/code&gt; and give it contents:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# Update system to start with
case node[&amp;#39;platform&amp;#39;]


when &amp;#39;debian&amp;#39;, &amp;#39;ubuntu&amp;#39;

    execute &amp;#39;AptUpdateUpgrade&amp;#39; do
        command &amp;quot;apt-get update &amp;amp;&amp;amp; DEBIAN_FRONTEND=noninteractive apt-get upgrade -y&amp;quot;
    end

when &amp;#39;redhat&amp;#39;, &amp;#39;centos&amp;#39;, &amp;#39;fedora&amp;#39;

     # Update all packages
    execute &amp;#39;UpdateYum&amp;#39; do
        command &amp;quot;yum -y update&amp;quot;
    end

    # Add Fedora&amp;#39;s Extra Packages for Enterprise Linux
    execute &amp;#39;GetEPELRepo&amp;#39; do
        command &amp;quot;rpm -iUvh http://dl.fedoraproject.org/pub/epel/7/x86_64/e/epel-release-7-9.noarch.rpm&amp;quot;
        not_if &amp;quot;rpm -qa | grep -qx &amp;#39;epel-release-7-9.noarch&amp;#39;&amp;quot;
    end

end
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;in the &lt;code&gt;default.rb&lt;/code&gt; recipe, add the line:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;include_recipe &amp;#39;c9_ide::update&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;That's it for now! Before we go any further, let's test this. Chef has automatically added some basis for testing to your repo. Let's start with kitchen. This assumes you have &lt;a href="https://www.virtualbox.org/wiki/Downloads"&gt;VirtualBox&lt;/a&gt; and &lt;a href="https://www.vagrantup.com/"&gt;Vagrant&lt;/a&gt; installed (if you don't, install them). At the base directory, run:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;kitchen create
kitchen converge
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The first command creates the virtual machines for us to work with, and teh second command cooks Chef inside of them. It is a very convenient way to do a full test of your code before pushing to github. The converge command may take quite a while as we are updating all packages on the systems and doing it for two VMs, and Ubuntu one and a CentOS one. If all goes well, the final output looks like:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Chef Client finished, 1/1 resources updated in 02 minutes 21 seconds
&lt;/pre&gt;&lt;/div&gt;


&lt;h6&gt;Creating a C9 User&lt;/h6&gt;
&lt;p&gt;It is rarely a good idea to run a program as root. As such, our next step is to create a user for running the Cloud 9 IDE. We start by creating a data bag. First, install knife-solo and &lt;a href="https://github.com/thbishop/knife-solo_data_bag"&gt;knife-solo data bag&lt;/a&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;chef gem install knife-solo
chef gem install knife-solo_data_bag
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This is not entirely necessary, but that tool can be useful in other ways for making chef solo cookbooks. Then we can generate a databag and databag item:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mkdir data_bags
export EDITOR=&amp;quot;vi&amp;quot;
knife solo data bag create users c9ide
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In the editor that pops up, paste the following content:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;{
  &amp;quot;id&amp;quot;: &amp;quot;c9ide&amp;quot;,
  &amp;quot;comment&amp;quot;: &amp;quot;c9ide User&amp;quot;,
  &amp;quot;ssh_keys&amp;quot;: [
    &amp;quot;&amp;quot;
  ],
  &amp;quot;home&amp;quot;: &amp;quot;/home/c9ide&amp;quot;,
  &amp;quot;ssh_keygen&amp;quot;: false
}
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Next, back to &lt;code&gt;recipe/default.rb&lt;/code&gt;, we can invoke the external chef recipe "users" to have this user installed on our system:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;include_recipe &amp;#39;user::data_bag&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;To create an attributes file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;chef generate attribute default
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and in &lt;code&gt;attributes/default.rb&lt;/code&gt; add the line:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;default[&amp;#39;users&amp;#39;] = &amp;#39;c9ide&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This of course shows the fantastic power and utility of Chef since we can call upon a wide range of libraries already created by the chef community. Now we need to tell Chef that we are using an external library, so in our &lt;code&gt;metadata.rb&lt;/code&gt; file at the top level we add the line at the end:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;depends          &amp;#39;user&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;At the same level there is a Berksfile with the content:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;source &amp;#39;https://supermarket.chef.io&amp;#39;

metadata
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;which tells chef to check this &lt;code&gt;metadata.rb&lt;/code&gt; file for dependencies (such as the user dependency we just added) that we need to pull and make available during cooking. We'll show how this is done manually a bit later, but for now &lt;code&gt;kitchen converge&lt;/code&gt; takes care of that.&lt;/p&gt;
&lt;p&gt;Now run &lt;code&gt;kitchen converge&lt;/code&gt; one more time, and you should see that the user is created. &lt;/p&gt;
&lt;p&gt;Let's create a quick smoke test item, add:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;describe user(&amp;#39;c9ide&amp;#39;) do
    it { should exist }
end
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;to &lt;code&gt;test/default/default_test.rb&lt;/code&gt; and run &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;kitchen verify
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;if all went well you will see:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt; User c9ide
     ✔  should exist
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now is a good time to push to github:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git add .
git commit -m &amp;quot;Adds update and users&amp;quot;
git push origin master
&lt;/pre&gt;&lt;/div&gt;


&lt;h6&gt;Installing MOTD&lt;/h6&gt;
&lt;p&gt;First, let's generate a blank template file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;chef generate template motd
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;fill with content:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;motd-attributes&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;message&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="x"&gt;The hostname of this node is &lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;hostname&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="x"&gt;The IP address of this node is &lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;ipaddress&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and create a recipe file &lt;code&gt;recipes/motd.rb&lt;/code&gt; with contents:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;template &amp;#39;/etc/motd&amp;#39; do
      source &amp;#39;motd.erb&amp;#39;
      mode &amp;#39;0644&amp;#39;
end
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and finally add this line to the &lt;code&gt;attributes/default.rb&lt;/code&gt; file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;default[&amp;#39;motd-attributes&amp;#39;][&amp;#39;message&amp;#39;] = &amp;quot;A Cloud 9 IDE server&amp;quot;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We add the following tests at &lt;code&gt;test/smoke/default/motd_test.rb&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;describe directory(&amp;#39;/etc/motd&amp;#39;) do  # describe this directory
    its(:content) { should match /A Cloud 9 IDE server/ }
end
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We run &lt;code&gt;kitchen converge&lt;/code&gt; and &lt;code&gt;kitchen verify&lt;/code&gt; again to make sure the recipe is fine, and then push to github as before.&lt;/p&gt;
&lt;h6&gt;Installing Packages&lt;/h6&gt;
&lt;p&gt;We are getting close to installing the Cloud9 IDE. Before doing so, we need to install some packages. Some of these packages are for security purposes, or convenience in administration, while others are needed for the Cloud 9 IDE system.&lt;/p&gt;
&lt;p&gt;Create a file &lt;code&gt;recipe/packages.rb&lt;/code&gt; with content:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;case node[&amp;#39;platform&amp;#39;]
when &amp;#39;debian&amp;#39;, &amp;#39;ubuntu&amp;#39;

    req_packages = [&amp;#39;fail2ban&amp;#39;,
                    &amp;#39;gcc&amp;#39;,
                    &amp;#39;g++&amp;#39;,
                    &amp;#39;git&amp;#39;,
                    &amp;#39;htop&amp;#39;,
                    &amp;#39;make&amp;#39;,
                    &amp;#39;nodejs&amp;#39;,
                    &amp;#39;nmap&amp;#39;,
                    &amp;#39;npm&amp;#39;,
                    &amp;#39;sysstat&amp;#39;,
                    &amp;#39;unattended-upgrades&amp;#39;,
                    &amp;#39;apt-listchanges&amp;#39;]

    req_packages.each do |packs|
      Chef::Log.info(&amp;quot;Installing: &amp;quot; + packs)
      package packs do
        action :install
      end
    end

    template &amp;#39;/etc/apt/apt.conf.d/50unattended-upgrades&amp;#39; do
        owner &amp;#39;root&amp;#39;
        group &amp;#39;root&amp;#39;
        mode &amp;#39;0644&amp;#39;
        source &amp;#39;50unattended-upgrades.erb&amp;#39;
    end

    template &amp;#39;/etc/apt/apt.conf.d/20auto-upgrades&amp;#39; do
        owner &amp;#39;root&amp;#39;
        group &amp;#39;root&amp;#39;
        mode &amp;#39;0644&amp;#39;
        source &amp;#39;20auto-upgrades.erb&amp;#39;
    end

when &amp;#39;redhat&amp;#39;, &amp;#39;centos&amp;#39;, &amp;#39;fedora&amp;#39;

    req_packages = [&amp;#39;fail2ban&amp;#39;,
                    &amp;#39;gcc-c++&amp;#39;,
                    &amp;#39;git&amp;#39;,
                    &amp;#39;glibc-static&amp;#39;,
                    &amp;#39;htop&amp;#39;,
                    &amp;#39;make&amp;#39;,
                    &amp;#39;nodejs&amp;#39;,
                    &amp;#39;nmap&amp;#39;,
                    &amp;#39;npm&amp;#39;,
                    &amp;#39;sysstat&amp;#39;,
                    &amp;#39;yum-cron&amp;#39;]

    req_packages.each do |packs|
      Chef::Log.info(&amp;quot;Installing: &amp;quot; + packs)
      package packs do
        action :install
      end
    end

    template &amp;#39;/etc/yum/yum-cron.conf&amp;#39; do
        owner &amp;#39;root&amp;#39;
        group &amp;#39;root&amp;#39;
        mode &amp;#39;0644&amp;#39;
        source &amp;#39;yum-cron.conf.erb&amp;#39;
    end

    execute &amp;#39;systemctl enable yum-cron&amp;#39; do
    end

    execute &amp;#39;systemctl start yum-cron&amp;#39; do
    end

end
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Notice that we have sneaked in automated security updates as well. For that, we require the following templates:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;templates/50unattended-upgrades.erb&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;// Automatically upgrade packages from these (origin, archive) pairs&lt;/span&gt;
&lt;span class="x"&gt;Unattended-Upgrade::Allowed-Origins {&lt;/span&gt;
&lt;span class="x"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;unattended-upgrades&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;origins&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;&lt;span class="n"&gt;each&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;origin&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="x"&gt;  &amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;origin&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="x"&gt;&amp;quot;;&lt;/span&gt;
&lt;span class="x"&gt;  &lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="x"&gt;&lt;/span&gt;
&lt;span class="x"&gt;};&lt;/span&gt;

&lt;span class="x"&gt;// List of packages to not update&lt;/span&gt;
&lt;span class="x"&gt;Unattended-Upgrade::Package-Blacklist {&lt;/span&gt;
&lt;span class="x"&gt;  &amp;quot;apache2&amp;quot;;&lt;/span&gt;
&lt;span class="x"&gt;  &amp;quot;nginx&amp;quot;;&lt;/span&gt;
&lt;span class="x"&gt;//  &amp;quot;libc6-dev&amp;quot;;&lt;/span&gt;
&lt;span class="x"&gt;//  &amp;quot;libc6-i686&amp;quot;;&lt;/span&gt;
&lt;span class="x"&gt;};&lt;/span&gt;

&lt;span class="x"&gt;// Send email to this address for problems or packages upgrades&lt;/span&gt;
&lt;span class="x"&gt;// If empty or unset then no email is sent, make sure that you&lt;/span&gt;
&lt;span class="x"&gt;// have a working mail setup on your system. The package &amp;#39;mailx&amp;#39;&lt;/span&gt;
&lt;span class="x"&gt;// must be installed or anything that provides /usr/bin/mail.&lt;/span&gt;
&lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;unattended-upgrades&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;send_email&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="p"&gt;?&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;// &amp;quot;&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="x"&gt;Unattended-Upgrade::Mail &amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;unattended-upgrades&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;email_address&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="x"&gt;&amp;quot;;&lt;/span&gt;

&lt;span class="x"&gt;// Do automatic removal of new unused dependencies after the upgrade&lt;/span&gt;
&lt;span class="x"&gt;// (equivalent to apt-get autoremove)&lt;/span&gt;
&lt;span class="x"&gt;Unattended-Upgrade::Remove-Unused-Dependencies &amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;unattended-upgrades&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;auto_remove&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="p"&gt;?&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;true&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;false&amp;quot;&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="x"&gt;&amp;quot;;&lt;/span&gt;

&lt;span class="x"&gt;// Automatically reboot *WITHOUT CONFIRMATION* if a&lt;/span&gt;
&lt;span class="x"&gt;// the file /var/run/reboot-required is found after the upgrade&lt;/span&gt;
&lt;span class="x"&gt;Unattended-Upgrade::Automatic-Reboot &amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;unattended-upgrades&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;auto_reboot&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="p"&gt;?&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;true&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;false&amp;quot;&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="x"&gt;&amp;quot;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;templates/20auto-upgrades.erb&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;APT::Periodic::Update-Package-Lists &amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt;&lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;unattended-upgrades&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;update_package_lists_interval&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="x"&gt;&amp;quot;;&lt;/span&gt;
&lt;span class="x"&gt;APT::Periodic::Unattended-Upgrade &amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt;&lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;unattended-upgrades&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;upgrade_interval&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="x"&gt;&amp;quot;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and&lt;/p&gt;
&lt;p&gt;&lt;code&gt;templates/yum-cron.conf.erb&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;update_cmd = security
apply_updates = yes
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;default[&amp;#39;unattended-upgrades&amp;#39;][&amp;#39;update_package_lists_interval&amp;#39;] = &amp;quot;1&amp;quot;
default[&amp;#39;unattended-upgrades&amp;#39;][&amp;#39;upgrade_interval&amp;#39;] = &amp;quot;1&amp;quot;
default[&amp;#39;unattended-upgrades&amp;#39;][&amp;#39;origins&amp;#39;] = [&amp;#39;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;distro_id&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt; &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;distro_codename&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;-security&amp;#39;]
default[&amp;#39;unattended-upgrades&amp;#39;][&amp;#39;send_email&amp;#39;] = false
default[&amp;#39;unattended-upgrades&amp;#39;][&amp;#39;email_address&amp;#39;] = &amp;quot;test@example.com&amp;quot;
default[&amp;#39;unattended-upgrades&amp;#39;][&amp;#39;auto_remove&amp;#39;] = false
default[&amp;#39;unattended-upgrades&amp;#39;][&amp;#39;auto_reboot&amp;#39;] = false
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and of course, our inspec test in &lt;code&gt;test/smoke/default/packages_test.rb&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;if os[:family] == &amp;#39;debian&amp;#39;
    req_packages = [&amp;#39;fail2ban&amp;#39;,
                    &amp;#39;gcc&amp;#39;,
                    &amp;#39;g++&amp;#39;,
                    &amp;#39;git&amp;#39;,
                    &amp;#39;htop&amp;#39;,
                    &amp;#39;make&amp;#39;,
                    &amp;#39;nodejs&amp;#39;,
                    &amp;#39;nmap&amp;#39;,
                    &amp;#39;npm&amp;#39;,
                    &amp;#39;sysstat&amp;#39;,
                    &amp;#39;unattended-upgrades&amp;#39;,
                    &amp;#39;apt-listchanges&amp;#39;]

    req_packages.each do |packs|
      describe package(packs) do
        it { should be_installed }
      end
    end

else

    req_packages = [&amp;#39;fail2ban&amp;#39;,
                    &amp;#39;gcc-c++&amp;#39;,
                    &amp;#39;git&amp;#39;,
                    &amp;#39;glibc-static&amp;#39;,
                    &amp;#39;htop&amp;#39;,
                    &amp;#39;make&amp;#39;,
                    &amp;#39;nodejs&amp;#39;,
                    &amp;#39;nmap&amp;#39;,
                    &amp;#39;npm&amp;#39;,
                    &amp;#39;sysstat&amp;#39;,
                    &amp;#39;yum-cron&amp;#39;]

    req_packages.each do |packs|
      describe package(packs) do
        it { should be_installed }
      end
    end
end
&lt;/pre&gt;&lt;/div&gt;


&lt;h6&gt;Installing Cloud 9 IDE&lt;/h6&gt;
&lt;p&gt;Chef has a built-in git resource that we can use to pull the Cloud 9 IDE code.&lt;/p&gt;
&lt;p&gt;The test for this section will be rather brief:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;describe directory(&amp;#39;/home/c9ide/core/README.md&amp;#39;) do  # describe this directory
    its(:content) { should match /^Cloud9/ }
end
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and the reason is that we can really verify whether or not this section succeeded in the next section on running via supervisor.&lt;/p&gt;
&lt;p&gt;The code for this section, in &lt;code&gt;/recipes/c9ide.rb&lt;/code&gt;, is:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git &amp;quot;/home/c9ide/core&amp;quot; do
   repository &amp;#39;https://github.com/c9/core.git&amp;#39;
   reference &amp;#39;master&amp;#39;
   action :sync
end

case node[&amp;#39;platform&amp;#39;]
when &amp;#39;debian&amp;#39;, &amp;#39;ubuntu&amp;#39;
    bash &amp;#39;create nodejs link&amp;#39; do
        code &amp;lt;&amp;lt;-EOH
        ln -s /usr/bin/nodejs /usr/bin/node
        EOH
        not_if { ::File.exist?(&amp;#39;/usr/bin/node&amp;#39;) }
    end
end

bash &amp;#39;install_cloud9ide&amp;#39; do
   cwd &amp;#39;/home/c9ide/core/&amp;#39;
   user &amp;#39;root&amp;#39;
   code &amp;lt;&amp;lt;-EOH
     scripts/install-sdk.sh
     EOH
   environment &amp;#39;PREFIX&amp;#39; =&amp;gt; &amp;#39;/usr/local&amp;#39;
end
&lt;/pre&gt;&lt;/div&gt;


&lt;h6&gt;Installing Supervisor&lt;/h6&gt;
&lt;p&gt;Finally, we want to leave our server running Cloud 9 IDE after provisioning it. Supervisor is a fantastic way to do so, though of course not the only way and perhaps not even the best way, but it is a convenient and production-ready solution (though this development kit version of Cloud 9 IDE is not production material and is meant for development purposes).&lt;/p&gt;
&lt;p&gt;In &lt;code&gt;recipes/supervisor.rb&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;package &amp;#39;supervisor&amp;#39; do
    action :install
end

case node[&amp;#39;platform&amp;#39;]
when &amp;#39;debian&amp;#39;, &amp;#39;ubuntu&amp;#39;

    cookbook_file &amp;#39;/etc/supervisor/conf.d/cloud9ide.conf&amp;#39; do
      source &amp;#39;c9ide.conf&amp;#39;
      owner &amp;#39;root&amp;#39;
      group &amp;#39;root&amp;#39;
      mode &amp;#39;0755&amp;#39;
      action :create
    end

    execute &amp;#39;start supervisor&amp;#39; do
      command &amp;#39;service supervisor start&amp;#39;
    end

    execute &amp;#39;reload supervisor&amp;#39; do
      command &amp;#39;supervisorctl update&amp;#39;
    end

when &amp;#39;redhat&amp;#39;, &amp;#39;centos&amp;#39;, &amp;#39;fedora&amp;#39;

    cookbook_file &amp;#39;/etc/supervisord.d/cloud9ide.ini&amp;#39; do
      source &amp;#39;c9ide.conf&amp;#39;
      owner &amp;#39;root&amp;#39;
      group &amp;#39;root&amp;#39;
      mode &amp;#39;0755&amp;#39;
      action :create
    end

    execute &amp;#39;start supervisor&amp;#39; do
      command &amp;#39;service supervisord start&amp;#39;
    end

    execute &amp;#39;reload supervisor&amp;#39; do
      command &amp;#39;supervisorctl update&amp;#39;
    end
end
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and finally add this to the &lt;code&gt;c9ide_test.rb&lt;/code&gt; test file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;describe port(9999) do
  it { should be_listening }
end
&lt;/pre&gt;&lt;/div&gt;


&lt;h5&gt;Putting it all together&lt;/h5&gt;
&lt;p&gt;The default recipe should now look like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;include_recipe &amp;#39;c9_ide::update&amp;#39;
include_recipe &amp;#39;user::data_bag&amp;#39;
include_recipe &amp;#39;c9_ide::motd&amp;#39;
include_recipe &amp;#39;c9_ide::packages&amp;#39;
include_recipe &amp;#39;c9_ide::cloud9ide&amp;#39;
include_recipe &amp;#39;c9_ide::supervisor&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;we run a final &lt;code&gt;kitchen converge&lt;/code&gt;; if all goes well, we follow up with a final &lt;code&gt;kitchen verify&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;-----&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Starting&lt;/span&gt; &lt;span class="n"&gt;Kitchen&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v1&lt;/span&gt;&lt;span class="mf"&gt;.14.2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;-----&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Setting&lt;/span&gt; &lt;span class="n"&gt;up&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;default&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ubuntu&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1604&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;
       &lt;span class="n"&gt;Finished&lt;/span&gt; &lt;span class="n"&gt;setting&lt;/span&gt; &lt;span class="n"&gt;up&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;default&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ubuntu&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1604&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;m0&lt;/span&gt;&lt;span class="mf"&gt;.00&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;
&lt;span class="o"&gt;-----&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Verifying&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;default&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ubuntu&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1604&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;
       &lt;span class="n"&gt;Loaded&lt;/span&gt;

&lt;span class="nl"&gt;Target&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;  &lt;span class="nl"&gt;ssh&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//vagrant@127.0.0.1:2222&lt;/span&gt;


  &lt;span class="n"&gt;File&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;c9ide&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;core&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;README&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;md&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;content&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;match&lt;/span&gt; &lt;span class="o"&gt;/^&lt;/span&gt;&lt;span class="n"&gt;Cloud9&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;
  &lt;span class="n"&gt;Port&lt;/span&gt; &lt;span class="mi"&gt;9999&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;listening&lt;/span&gt;
  &lt;span class="n"&gt;User&lt;/span&gt; &lt;span class="n"&gt;c9ide&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;exist&lt;/span&gt;
  &lt;span class="n"&gt;File&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;motd&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;content&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;match&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;Cloud&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt; &lt;span class="n"&gt;IDE&lt;/span&gt; &lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;
  &lt;span class="n"&gt;System&lt;/span&gt; &lt;span class="n"&gt;Package&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;fail2ban&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;installed&lt;/span&gt;
  &lt;span class="n"&gt;System&lt;/span&gt; &lt;span class="n"&gt;Package&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;gcc&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;installed&lt;/span&gt;
  &lt;span class="n"&gt;System&lt;/span&gt; &lt;span class="n"&gt;Package&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;installed&lt;/span&gt;
  &lt;span class="n"&gt;System&lt;/span&gt; &lt;span class="n"&gt;Package&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;installed&lt;/span&gt;
  &lt;span class="n"&gt;System&lt;/span&gt; &lt;span class="n"&gt;Package&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;htop&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;installed&lt;/span&gt;
  &lt;span class="n"&gt;System&lt;/span&gt; &lt;span class="n"&gt;Package&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;make&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;installed&lt;/span&gt;
  &lt;span class="n"&gt;System&lt;/span&gt; &lt;span class="n"&gt;Package&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;nodejs&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;installed&lt;/span&gt;
  &lt;span class="n"&gt;System&lt;/span&gt; &lt;span class="n"&gt;Package&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;nmap&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;installed&lt;/span&gt;
  &lt;span class="n"&gt;System&lt;/span&gt; &lt;span class="n"&gt;Package&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;npm&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;installed&lt;/span&gt;
  &lt;span class="n"&gt;System&lt;/span&gt; &lt;span class="n"&gt;Package&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;sysstat&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;installed&lt;/span&gt;
  &lt;span class="n"&gt;System&lt;/span&gt; &lt;span class="n"&gt;Package&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;unattended&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;upgrades&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;installed&lt;/span&gt;
  &lt;span class="n"&gt;System&lt;/span&gt; &lt;span class="n"&gt;Package&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;apt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;listchanges&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;installed&lt;/span&gt;

&lt;span class="n"&gt;Test&lt;/span&gt; &lt;span class="nl"&gt;Summary&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt; &lt;span class="n"&gt;successful&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="n"&gt;failures&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="n"&gt;skipped&lt;/span&gt;
       &lt;span class="n"&gt;Finished&lt;/span&gt; &lt;span class="n"&gt;verifying&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;default&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ubuntu&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1604&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;m1&lt;/span&gt;&lt;span class="mf"&gt;.28&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;
&lt;span class="o"&gt;-----&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Setting&lt;/span&gt; &lt;span class="n"&gt;up&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;default&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;centos&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;72&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;
       &lt;span class="n"&gt;Finished&lt;/span&gt; &lt;span class="n"&gt;setting&lt;/span&gt; &lt;span class="n"&gt;up&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;default&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;centos&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;72&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;m0&lt;/span&gt;&lt;span class="mf"&gt;.00&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;
&lt;span class="o"&gt;-----&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Verifying&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;default&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;centos&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;72&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;
       &lt;span class="n"&gt;Loaded&lt;/span&gt;

&lt;span class="nl"&gt;Target&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;  &lt;span class="nl"&gt;ssh&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//vagrant@127.0.0.1:2200&lt;/span&gt;


  &lt;span class="n"&gt;File&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;c9ide&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;core&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;README&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;md&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;content&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;match&lt;/span&gt; &lt;span class="o"&gt;/^&lt;/span&gt;&lt;span class="n"&gt;Cloud9&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;
  &lt;span class="n"&gt;Port&lt;/span&gt; &lt;span class="mi"&gt;9999&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;listening&lt;/span&gt;
  &lt;span class="n"&gt;User&lt;/span&gt; &lt;span class="n"&gt;c9ide&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;exist&lt;/span&gt;
  &lt;span class="n"&gt;File&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;motd&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;content&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;match&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;Cloud&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt; &lt;span class="n"&gt;IDE&lt;/span&gt; &lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;
  &lt;span class="n"&gt;System&lt;/span&gt; &lt;span class="n"&gt;Package&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;fail2ban&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;installed&lt;/span&gt;
  &lt;span class="n"&gt;System&lt;/span&gt; &lt;span class="n"&gt;Package&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;gcc&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;installed&lt;/span&gt;
  &lt;span class="n"&gt;System&lt;/span&gt; &lt;span class="n"&gt;Package&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;installed&lt;/span&gt;
  &lt;span class="n"&gt;System&lt;/span&gt; &lt;span class="n"&gt;Package&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;glibc&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;installed&lt;/span&gt;
  &lt;span class="n"&gt;System&lt;/span&gt; &lt;span class="n"&gt;Package&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;htop&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;installed&lt;/span&gt;
  &lt;span class="n"&gt;System&lt;/span&gt; &lt;span class="n"&gt;Package&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;make&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;installed&lt;/span&gt;
  &lt;span class="n"&gt;System&lt;/span&gt; &lt;span class="n"&gt;Package&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;nodejs&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;installed&lt;/span&gt;
  &lt;span class="n"&gt;System&lt;/span&gt; &lt;span class="n"&gt;Package&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;nmap&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;installed&lt;/span&gt;
  &lt;span class="n"&gt;System&lt;/span&gt; &lt;span class="n"&gt;Package&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;npm&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;installed&lt;/span&gt;
  &lt;span class="n"&gt;System&lt;/span&gt; &lt;span class="n"&gt;Package&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;sysstat&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;installed&lt;/span&gt;
  &lt;span class="n"&gt;System&lt;/span&gt; &lt;span class="n"&gt;Package&lt;/span&gt;
     &lt;span class="err"&gt;✔&lt;/span&gt;  &lt;span class="n"&gt;yum&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cron&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;installed&lt;/span&gt;

&lt;span class="n"&gt;Test&lt;/span&gt; &lt;span class="nl"&gt;Summary&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;15&lt;/span&gt; &lt;span class="n"&gt;successful&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="n"&gt;failures&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="n"&gt;skipped&lt;/span&gt;
       &lt;span class="n"&gt;Finished&lt;/span&gt; &lt;span class="n"&gt;verifying&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;default&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;centos&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;72&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;m13&lt;/span&gt;&lt;span class="mf"&gt;.80&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;
&lt;span class="o"&gt;-----&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Kitchen&lt;/span&gt; &lt;span class="n"&gt;is&lt;/span&gt; &lt;span class="n"&gt;finished&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;m16&lt;/span&gt;&lt;span class="mf"&gt;.47&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Congratulations, you have a basic working chef recipe for installing Cloud 9 IDE, tested and provisioned on both major families of Linux.&lt;/p&gt;
&lt;h3&gt;Source Code&lt;/h3&gt;
&lt;p&gt;You can find the source code for this recipe on my github account &lt;a href="https://github.com/doctimjones/c9_ide_chef/tree/PartI"&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Future Steps&lt;/h3&gt;
&lt;p&gt;We took some shortcuts and avoided some best practices for convenience here. Ideally we would like some unit tests and to pull in more community recipes. For example, the supervisor chef cookbook could be used here instead of dealing with that in a platform case. &lt;/p&gt;
&lt;p&gt;In the forthcoming Part II, we will use Puppet, a widely used alternative to Chef, to provision a server that runs the Cloud 9 IDE SDK as we have here with Chef.&lt;/p&gt;</summary><category term="AWS"></category><category term="Chef"></category><category term="Cloudformation"></category></entry><entry><title>Python uses operational chaining for boolean comparisons</title><link href="http://doctimjones.org/python-uses-operational-chaining-for-boolean-comparisons.html" rel="alternate"></link><published>2017-01-20T18:23:00-05:00</published><updated>2017-01-20T18:23:00-05:00</updated><author><name>Tim Jones</name></author><id>tag:doctimjones.org,2017-01-20:python-uses-operational-chaining-for-boolean-comparisons.html</id><summary type="html">&lt;h4&gt;A Python feature?&lt;/h4&gt;
&lt;p&gt;A colleague noticed this behavior:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt;&amp;gt;&amp;gt; &amp;#39;a&amp;#39; in &amp;#39;b&amp;#39; == 0
False
&amp;gt;&amp;gt;&amp;gt; (&amp;#39;a&amp;#39; in &amp;#39;b&amp;#39;) == 0
True
&amp;gt;&amp;gt;&amp;gt; &amp;#39;a&amp;#39; in (&amp;#39;b&amp;#39; == 0)
TypeError: argument of type &amp;#39;bool&amp;#39; is not iterable
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;offering a bucket of doubloons to anyone who can explain it. The final case is simply a typecasting problem, but the first two cases demonstrate Python's operating chaining behavior.&lt;/p&gt;
&lt;h4&gt;Explanation&lt;/h4&gt;
&lt;h5&gt;Using the Dis Module to dig deeper&lt;/h5&gt;
&lt;p&gt;Using the dis module, we find:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;#39;a&amp;#39; in &amp;#39;b&amp;#39; == 0

  7           0 LOAD_CONST               1 (&amp;#39;a&amp;#39;)
              3 LOAD_CONST               2 (&amp;#39;b&amp;#39;)
              6 DUP_TOP
              7 ROT_THREE
              8 COMPARE_OP               6 (in)
             11 JUMP_IF_FALSE_OR_POP    21
             14 LOAD_CONST               3 (0)
             17 COMPARE_OP               2 (==)
             20 RETURN_VALUE
        &amp;gt;&amp;gt;   21 ROT_TWO
             22 POP_TOP
             23 RETURN_VALUE

&amp;#39;a&amp;#39; in &amp;#39;b&amp;#39; and &amp;#39;b&amp;#39; == 0
15           0 LOAD_CONST               1 (&amp;#39;a&amp;#39;)
              3 LOAD_CONST               2 (&amp;#39;b&amp;#39;)
              6 COMPARE_OP               6 (in)
              9 JUMP_IF_FALSE_OR_POP    21
             12 LOAD_CONST               2 (&amp;#39;b&amp;#39;)
             15 LOAD_CONST               3 (0)
             18 COMPARE_OP               2 (==)
        &amp;gt;&amp;gt;   21 RETURN_VALUE

&amp;#39;a&amp;#39; in &amp;#39;a&amp;#39; == 0
  9           0 LOAD_CONST               1 (&amp;#39;a&amp;#39;)
              3 LOAD_CONST               1 (&amp;#39;a&amp;#39;)
              6 DUP_TOP
              7 ROT_THREE
              8 COMPARE_OP               6 (in)
             11 JUMP_IF_FALSE_OR_POP    21
             14 LOAD_CONST               2 (0)
             17 COMPARE_OP               2 (==)
             20 RETURN_VALUE
        &amp;gt;&amp;gt;   21 ROT_TWO
             22 POP_TOP
             23 RETURN_VALUE
&lt;/pre&gt;&lt;/div&gt;


&lt;h5&gt;In words&lt;/h5&gt;
&lt;p&gt;Parenthesis essential forces Python to do 'something' first before doing anything else. I often use parenthesis out of habit even when not needed just to be 100% clear. The above behavior shows where that habit might come in handy if Python's operation chaining isn't the desired behavior. When we put &lt;code&gt;'a' in 'b'&lt;/code&gt; inside parenthesis, Python is forced to evaluate that independently of the rest of line; this evaluates to &lt;code&gt;True&lt;/code&gt; or &lt;code&gt;False&lt;/code&gt;, and then the &lt;code&gt;== 0&lt;/code&gt; comparison acts as a Boolean comparison, giving expected behavior. &lt;/p&gt;
&lt;p&gt;In the first instance above, however, Python is operator chaining. For &lt;code&gt;'a' in 'b' == 0&lt;/code&gt;, it first loads a and b strings such that the stack is&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[ b, a ]
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;it then &lt;code&gt;DUP_TOP&lt;/code&gt; duplicates &lt;code&gt;b&lt;/code&gt; so that it doesn’t have to waste time to load it again for the second evaluation, resulting in the stack:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[ b, b, a ]
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;ROT_THREE&lt;/code&gt; lifts second and third stack item up and the top item down to third place, so now the stack is now: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[ b, a, b ]
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;COMPARE_OP&lt;/code&gt; acts on &lt;code&gt;[ b, a]&lt;/code&gt;, and since it is not true, &lt;code&gt;JUMP_IF_FALSE_OR_POP&lt;/code&gt; forces it to jump and just returns False. What is interesting is if you do &lt;code&gt;'a' in 'a' == 1&lt;/code&gt;, 
which after &lt;code&gt;DUP_TOP&lt;/code&gt; gives us the stack:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[ a, a, a ]
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Here &lt;code&gt;'a' in 'a'&lt;/code&gt; is obviously true, and these two entries of the stack are replaced with the result of that evaluation, which is &lt;code&gt;True&lt;/code&gt;. This, now being the top of the stack, is popped off by &lt;code&gt;JUMP_IF_FALSE_OR_POP&lt;/code&gt; 
leaving the duplicated 'a' on the top of the stack, where then &lt;code&gt;1&lt;/code&gt; is loaded so the stack is now:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[1, a]
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and the &lt;code&gt;==&lt;/code&gt; comparison is applied which is indeed False. 
Thus &lt;code&gt;'a' in 'a' == 0&lt;/code&gt; is chained as &lt;code&gt;'a' in 'a' and 'a' == 0&lt;/code&gt; and will be false. Similarly, &lt;code&gt;'a' in 'b' == 0&lt;/code&gt; is effectively the same as &lt;code&gt;'a' in 'b' and 'b' == 0&lt;/code&gt; which is false.&lt;/p&gt;
&lt;p&gt;The following behavior, then, makes sense:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;gt;&amp;gt;&amp;gt; &amp;#39;a&amp;#39; in &amp;#39;a&amp;#39;
True
&amp;gt;&amp;gt;&amp;gt; &amp;#39;a&amp;#39; in &amp;#39;a&amp;#39; and &amp;#39;a&amp;#39; == True
False
&amp;gt;&amp;gt;&amp;gt; &amp;#39;a&amp;#39; in &amp;#39;a&amp;#39; == True
False
&lt;/pre&gt;&lt;/div&gt;</summary><category term="Python"></category></entry><entry><title>Integrating the Rossler System with iPython Notebooks</title><link href="http://doctimjones.org/integrating-the-rossler-system-with-ipython-notebooks.html" rel="alternate"></link><published>2016-03-03T01:23:00-05:00</published><updated>2016-03-03T01:23:00-05:00</updated><author><name>Tim Jones</name></author><id>tag:doctimjones.org,2016-03-03:integrating-the-rossler-system-with-ipython-notebooks.html</id><summary type="html">&lt;style type="text/css"&gt;/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI colors. */
.ansibold {
  font-weight: bold;
}
/* use dark versions for foreground, to improve visibility */
.ansiblack {
  color: black;
}
.ansired {
  color: darkred;
}
.ansigreen {
  color: darkgreen;
}
.ansiyellow {
  color: #c4a000;
}
.ansiblue {
  color: darkblue;
}
.ansipurple {
  color: darkviolet;
}
.ansicyan {
  color: steelblue;
}
.ansigray {
  color: gray;
}
/* and light for background, for the same reason */
.ansibgblack {
  background-color: black;
}
.ansibgred {
  background-color: red;
}
.ansibggreen {
  background-color: green;
}
.ansibgyellow {
  background-color: yellow;
}
.ansibgblue {
  background-color: blue;
}
.ansibgpurple {
  background-color: magenta;
}
.ansibgcyan {
  background-color: cyan;
}
.ansibggray {
  background-color: gray;
}
div.cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  border-radius: 2px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  border-width: 1px;
  border-style: solid;
  border-color: transparent;
  width: 100%;
  padding: 5px;
  /* This acts as a spacer between cells, that is outside the border */
  margin: 0px;
  outline: none;
  border-left-width: 1px;
  padding-left: 5px;
  background: linear-gradient(to right, transparent -40px, transparent 1px, transparent 1px, transparent 100%);
}
div.cell.jupyter-soft-selected {
  border-left-color: #90CAF9;
  border-left-color: #E3F2FD;
  border-left-width: 1px;
  padding-left: 5px;
  border-right-color: #E3F2FD;
  border-right-width: 1px;
  background: #E3F2FD;
}
@media print {
  div.cell.jupyter-soft-selected {
    border-color: transparent;
  }
}
div.cell.selected {
  border-color: #ababab;
  border-left-width: 0px;
  padding-left: 6px;
  background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 5px, transparent 5px, transparent 100%);
}
@media print {
  div.cell.selected {
    border-color: transparent;
  }
}
div.cell.selected.jupyter-soft-selected {
  border-left-width: 0;
  padding-left: 6px;
  background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 7px, #E3F2FD 7px, #E3F2FD 100%);
}
.edit_mode div.cell.selected {
  border-color: #66BB6A;
  border-left-width: 0px;
  padding-left: 6px;
  background: linear-gradient(to right, #66BB6A -40px, #66BB6A 5px, transparent 5px, transparent 100%);
}
@media print {
  .edit_mode div.cell.selected {
    border-color: transparent;
  }
}
.prompt {
  /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */
  min-width: 14ex;
  /* This padding is tuned to match the padding on the CodeMirror editor. */
  padding: 0.4em;
  margin: 0px;
  font-family: monospace;
  text-align: right;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
  /* Don't highlight prompt number selection */
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  /* Use default cursor */
  cursor: default;
}
@media (max-width: 540px) {
  .prompt {
    text-align: left;
  }
}
div.inner_cell {
  min-width: 0;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_area {
  border: 1px solid #cfcfcf;
  border-radius: 2px;
  background: #f7f7f7;
  line-height: 1.21429em;
}
/* This is needed so that empty prompt areas can collapse to zero height when there
   is no content in the output_subarea and the prompt. The main purpose of this is
   to make sure that empty JavaScript output_subareas have no height. */
div.prompt:empty {
  padding-top: 0;
  padding-bottom: 0;
}
div.unrecognized_cell {
  padding: 5px 5px 5px 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.unrecognized_cell .inner_cell {
  border-radius: 2px;
  padding: 5px;
  font-weight: bold;
  color: red;
  border: 1px solid #cfcfcf;
  background: #eaeaea;
}
div.unrecognized_cell .inner_cell a {
  color: inherit;
  text-decoration: none;
}
div.unrecognized_cell .inner_cell a:hover {
  color: inherit;
  text-decoration: none;
}
@media (max-width: 540px) {
  div.unrecognized_cell &gt; div.prompt {
    display: none;
  }
}
div.code_cell {
  /* avoid page breaking on code cells when printing */
}
@media print {
  div.code_cell {
    page-break-inside: avoid;
  }
}
/* any special styling for code cells that are currently running goes here */
div.input {
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.input {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_prompt {
  color: #303F9F;
  border-top: 1px solid transparent;
}
div.input_area &gt; div.highlight {
  margin: 0.4em;
  border: none;
  padding: 0px;
  background-color: transparent;
}
div.input_area &gt; div.highlight &gt; pre {
  margin: 0px;
  border: none;
  padding: 0px;
  background-color: transparent;
}
/* The following gets added to the &lt;head&gt; if it is detected that the user has a
 * monospace font with inconsistent normal/bold/italic height.  See
 * notebookmain.js.  Such fonts will have keywords vertically offset with
 * respect to the rest of the text.  The user should select a better font.
 * See: https://github.com/ipython/ipython/issues/1503
 *
 * .CodeMirror span {
 *      vertical-align: bottom;
 * }
 */
.CodeMirror {
  line-height: 1.21429em;
  /* Changed from 1em to our global default */
  font-size: 14px;
  height: auto;
  /* Changed to auto to autogrow */
  background: none;
  /* Changed from white to allow our bg to show through */
}
.CodeMirror-scroll {
  /*  The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/
  /*  We have found that if it is visible, vertical scrollbars appear with font size changes.*/
  overflow-y: hidden;
  overflow-x: auto;
}
.CodeMirror-lines {
  /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */
  /* we have set a different line-height and want this to scale with that. */
  padding: 0.4em;
}
.CodeMirror-linenumber {
  padding: 0 8px 0 4px;
}
.CodeMirror-gutters {
  border-bottom-left-radius: 2px;
  border-top-left-radius: 2px;
}
.CodeMirror pre {
  /* In CM3 this went to 4px from 0 in CM2. We need the 0 value because of how we size */
  /* .CodeMirror-lines */
  padding: 0;
  border: 0;
  border-radius: 0;
}
/*

Original style from softwaremaniacs.org (c) Ivan Sagalaev &lt;Maniac@SoftwareManiacs.Org&gt;
Adapted from GitHub theme

*/
.highlight-base {
  color: #000;
}
.highlight-variable {
  color: #000;
}
.highlight-variable-2 {
  color: #1a1a1a;
}
.highlight-variable-3 {
  color: #333333;
}
.highlight-string {
  color: #BA2121;
}
.highlight-comment {
  color: #408080;
  font-style: italic;
}
.highlight-number {
  color: #080;
}
.highlight-atom {
  color: #88F;
}
.highlight-keyword {
  color: #008000;
  font-weight: bold;
}
.highlight-builtin {
  color: #008000;
}
.highlight-error {
  color: #f00;
}
.highlight-operator {
  color: #AA22FF;
  font-weight: bold;
}
.highlight-meta {
  color: #AA22FF;
}
/* previously not defined, copying from default codemirror */
.highlight-def {
  color: #00f;
}
.highlight-string-2 {
  color: #f50;
}
.highlight-qualifier {
  color: #555;
}
.highlight-bracket {
  color: #997;
}
.highlight-tag {
  color: #170;
}
.highlight-attribute {
  color: #00c;
}
.highlight-header {
  color: blue;
}
.highlight-quote {
  color: #090;
}
.highlight-link {
  color: #00c;
}
/* apply the same style to codemirror */
.cm-s-ipython span.cm-keyword {
  color: #008000;
  font-weight: bold;
}
.cm-s-ipython span.cm-atom {
  color: #88F;
}
.cm-s-ipython span.cm-number {
  color: #080;
}
.cm-s-ipython span.cm-def {
  color: #00f;
}
.cm-s-ipython span.cm-variable {
  color: #000;
}
.cm-s-ipython span.cm-operator {
  color: #AA22FF;
  font-weight: bold;
}
.cm-s-ipython span.cm-variable-2 {
  color: #1a1a1a;
}
.cm-s-ipython span.cm-variable-3 {
  color: #333333;
}
.cm-s-ipython span.cm-comment {
  color: #408080;
  font-style: italic;
}
.cm-s-ipython span.cm-string {
  color: #BA2121;
}
.cm-s-ipython span.cm-string-2 {
  color: #f50;
}
.cm-s-ipython span.cm-meta {
  color: #AA22FF;
}
.cm-s-ipython span.cm-qualifier {
  color: #555;
}
.cm-s-ipython span.cm-builtin {
  color: #008000;
}
.cm-s-ipython span.cm-bracket {
  color: #997;
}
.cm-s-ipython span.cm-tag {
  color: #170;
}
.cm-s-ipython span.cm-attribute {
  color: #00c;
}
.cm-s-ipython span.cm-header {
  color: blue;
}
.cm-s-ipython span.cm-quote {
  color: #090;
}
.cm-s-ipython span.cm-link {
  color: #00c;
}
.cm-s-ipython span.cm-error {
  color: #f00;
}
.cm-s-ipython span.cm-tab {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=);
  background-position: right;
  background-repeat: no-repeat;
}
div.output_wrapper {
  /* this position must be relative to enable descendents to be absolute within it */
  position: relative;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  z-index: 1;
}
/* class for the output area when it should be height-limited */
div.output_scroll {
  /* ideally, this would be max-height, but FF barfs all over that */
  height: 24em;
  /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */
  width: 100%;
  overflow: auto;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  display: block;
}
/* output div while it is collapsed */
div.output_collapsed {
  margin: 0px;
  padding: 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
div.out_prompt_overlay {
  height: 100%;
  padding: 0px 0.4em;
  position: absolute;
  border-radius: 2px;
}
div.out_prompt_overlay:hover {
  /* use inner shadow to get border that is computed the same on WebKit/FF */
  -webkit-box-shadow: inset 0 0 1px #000;
  box-shadow: inset 0 0 1px #000;
  background: rgba(240, 240, 240, 0.5);
}
div.output_prompt {
  color: #D84315;
}
/* This class is the outer container of all output sections. */
div.output_area {
  padding: 0px;
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.output_area .MathJax_Display {
  text-align: left !important;
}
div.output_area 
div.output_area 
div.output_area img,
div.output_area svg {
  max-width: 100%;
  height: auto;
}
div.output_area img.unconfined,
div.output_area svg.unconfined {
  max-width: none;
}
/* This is needed to protect the pre formating from global settings such
   as that of bootstrap */
.output {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.output_area {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
div.output_area pre {
  margin: 0;
  padding: 0;
  border: 0;
  vertical-align: baseline;
  color: black;
  background-color: transparent;
  border-radius: 0;
}
/* This class is for the output subarea inside the output_area and after
   the prompt div. */
div.output_subarea {
  overflow-x: auto;
  padding: 0.4em;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
  max-width: calc(100% - 14ex);
}
div.output_scroll div.output_subarea {
  overflow-x: visible;
}
/* The rest of the output_* classes are for special styling of the different
   output types */
/* all text output has this class: */
div.output_text {
  text-align: left;
  color: #000;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
}
/* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */
div.output_stderr {
  background: #fdd;
  /* very light red background for stderr */
}
div.output_latex {
  text-align: left;
}
/* Empty output_javascript divs should have no height */
div.output_javascript:empty {
  padding: 0;
}
.js-error {
  color: darkred;
}
/* raw_input styles */
div.raw_input_container {
  line-height: 1.21429em;
  padding-top: 5px;
}
pre.raw_input_prompt {
  /* nothing needed here. */
}
input.raw_input {
  font-family: monospace;
  font-size: inherit;
  color: inherit;
  width: auto;
  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;
  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0em 0.25em;
  margin: 0em 0.25em;
}
input.raw_input:focus {
  box-shadow: none;
}
p.p-space {
  margin-bottom: 10px;
}
div.output_unrecognized {
  padding: 5px;
  font-weight: bold;
  color: red;
}
div.output_unrecognized a {
  color: inherit;
  text-decoration: none;
}
div.output_unrecognized a:hover {
  color: inherit;
  text-decoration: none;
}
.rendered_html {
  color: #000;
  /* any extras will just be numbers: */
}



.rendered_html :link {
  text-decoration: underline;
}
.rendered_html :visited {
  text-decoration: underline;
}






.rendered_html h1:first-child {
  margin-top: 0.538em;
}
.rendered_html h2:first-child {
  margin-top: 0.636em;
}
.rendered_html h3:first-child {
  margin-top: 0.777em;
}
.rendered_html h4:first-child {
  margin-top: 1em;
}
.rendered_html h5:first-child {
  margin-top: 1em;
}
.rendered_html h6:first-child {
  margin-top: 1em;
}








.rendered_html * + ul {
  margin-top: 1em;
}
.rendered_html * + ol {
  margin-top: 1em;
}


.rendered_html pre,



.rendered_html tr,
.rendered_html th,

.rendered_html td,


.rendered_html * + table {
  margin-top: 1em;
}

.rendered_html * + p {
  margin-top: 1em;
}

.rendered_html * + img {
  margin-top: 1em;
}
.rendered_html img,

.rendered_html img.unconfined,

div.text_cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.text_cell &gt; div.prompt {
    display: none;
  }
}
div.text_cell_render {
  /*font-family: "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;*/
  outline: none;
  resize: none;
  width: inherit;
  border-style: none;
  padding: 0.5em 0.5em 0.5em 0.4em;
  color: #000;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
a.anchor-link:link {
  text-decoration: none;
  padding: 0px 20px;
  visibility: hidden;
}
h1:hover .anchor-link,
h2:hover .anchor-link,
h3:hover .anchor-link,
h4:hover .anchor-link,
h5:hover .anchor-link,
h6:hover .anchor-link {
  visibility: visible;
}
.text_cell.rendered .input_area {
  display: none;
}
.text_cell.rendered 
.text_cell.unrendered .text_cell_render {
  display: none;
}
.cm-header-1,
.cm-header-2,
.cm-header-3,
.cm-header-4,
.cm-header-5,
.cm-header-6 {
  font-weight: bold;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
.cm-header-1 {
  font-size: 185.7%;
}
.cm-header-2 {
  font-size: 157.1%;
}
.cm-header-3 {
  font-size: 128.6%;
}
.cm-header-4 {
  font-size: 110%;
}
.cm-header-5 {
  font-size: 100%;
  font-style: italic;
}
.cm-header-6 {
  font-size: 100%;
  font-style: italic;
}
&lt;/style&gt;
&lt;style type="text/css"&gt;.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */&lt;/style&gt;
&lt;style type="text/css"&gt;
/* Temporary definitions which will become obsolete with Notebook release 5.0 */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-bold { font-weight: bold; }
&lt;/style&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [2]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib&lt;/span&gt;
&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;matplotlib&lt;/span&gt; inline
&lt;span class="c1"&gt;#import matplotlib.pyplot as plt&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;mpl_toolkits.mplot3d&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Axes3D&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;bokeh.plotting&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;plt&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;bokeh.models&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;HoverTool&lt;/span&gt;
&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;output_notebook&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;bokeh&lt;/span&gt;
&lt;span class="n"&gt;bokeh&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;__version__&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;
&lt;div class="output_area"&gt;
&lt;div class="prompt"&gt;&lt;/div&gt;
&lt;div class="output_html rendered_html output_subarea "&gt;
&lt;div class="bk-root"&gt;
&lt;a class="bk-logo bk-logo-small bk-logo-notebook" href="http://bokeh.pydata.org" target="_blank"&gt;&lt;/a&gt;
&lt;span id="7aaedfca-192f-401d-9126-5cef16e709a5"&gt;Loading BokehJS ...&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="output_area"&gt;
&lt;div class="prompt"&gt;&lt;/div&gt;
&lt;div id="df1b82ef-4c71-4c30-8fa6-f5e7b87007d0"&gt;&lt;/div&gt;
&lt;div class="output_subarea output_javascript "&gt;
&lt;script type="text/javascript"&gt;
var element = $('#df1b82ef-4c71-4c30-8fa6-f5e7b87007d0');

(function(global) {
  function now() {
    return new Date();
  }

  var force = true;

  if (typeof (window._bokeh_onload_callbacks) === "undefined" || force === true) {
    window._bokeh_onload_callbacks = [];
    window._bokeh_is_loading = undefined;
  }


  
  if (typeof (window._bokeh_timeout) === "undefined" || force === true) {
    window._bokeh_timeout = Date.now() + 5000;
    window._bokeh_failed_load = false;
  }

  var NB_LOAD_WARNING = {'data': {'text/html':
     "&lt;div style='background-color: #fdd'&gt;\n"+
     "&lt;p&gt;\n"+
     "BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \n"+
     "may be due to a slow or bad network connection. Possible fixes:\n"+
     "&lt;/p&gt;\n"+
     "&lt;ul&gt;\n"+
     "&lt;li&gt;re-rerun `output_notebook()` to attempt to load from CDN again, or&lt;/li&gt;\n"+
     "&lt;li&gt;use INLINE resources instead, as so:&lt;/li&gt;\n"+
     "&lt;/ul&gt;\n"+
     "&lt;code&gt;\n"+
     "from bokeh.resources import INLINE\n"+
     "output_notebook(resources=INLINE)\n"+
     "&lt;/code&gt;\n"+
     "&lt;/div&gt;"}};

  function display_loaded() {
    if (window.Bokeh !== undefined) {
      document.getElementById("7aaedfca-192f-401d-9126-5cef16e709a5").textContent = "BokehJS successfully loaded.";
    } else if (Date.now() &lt; window._bokeh_timeout) {
      setTimeout(display_loaded, 100)
    }
  }

  function run_callbacks() {
    window._bokeh_onload_callbacks.forEach(function(callback) { callback() });
    delete window._bokeh_onload_callbacks
    console.info("Bokeh: all callbacks have finished");
  }

  function load_libs(js_urls, callback) {
    window._bokeh_onload_callbacks.push(callback);
    if (window._bokeh_is_loading &gt; 0) {
      console.log("Bokeh: BokehJS is being loaded, scheduling callback at", now());
      return null;
    }
    if (js_urls == null || js_urls.length === 0) {
      run_callbacks();
      return null;
    }
    console.log("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
    window._bokeh_is_loading = js_urls.length;
    for (var i = 0; i &lt; js_urls.length; i++) {
      var url = js_urls[i];
      var s = document.createElement('script');
      s.src = url;
      s.async = false;
      s.onreadystatechange = s.onload = function() {
        window._bokeh_is_loading--;
        if (window._bokeh_is_loading === 0) {
          console.log("Bokeh: all BokehJS libraries loaded");
          run_callbacks()
        }
      };
      s.onerror = function() {
        console.warn("failed to load library " + url);
      };
      console.log("Bokeh: injecting script tag for BokehJS library: ", url);
      document.getElementsByTagName("head")[0].appendChild(s);
    }
  };var element = document.getElementById("7aaedfca-192f-401d-9126-5cef16e709a5");
  if (element == null) {
    console.log("Bokeh: ERROR: autoload.js configured with elementid '7aaedfca-192f-401d-9126-5cef16e709a5' but no matching script tag was found. ")
    return false;
  }

  var js_urls = ["https://cdn.pydata.org/bokeh/release/bokeh-0.12.4.min.js", "https://cdn.pydata.org/bokeh/release/bokeh-widgets-0.12.4.min.js"];

  var inline_js = [
    function(Bokeh) {
      Bokeh.set_log_level("info");
    },
    
    function(Bokeh) {
      
      document.getElementById("7aaedfca-192f-401d-9126-5cef16e709a5").textContent = "BokehJS is loading...";
    },
    function(Bokeh) {
      console.log("Bokeh: injecting CSS: https://cdn.pydata.org/bokeh/release/bokeh-0.12.4.min.css");
      Bokeh.embed.inject_css("https://cdn.pydata.org/bokeh/release/bokeh-0.12.4.min.css");
      console.log("Bokeh: injecting CSS: https://cdn.pydata.org/bokeh/release/bokeh-widgets-0.12.4.min.css");
      Bokeh.embed.inject_css("https://cdn.pydata.org/bokeh/release/bokeh-widgets-0.12.4.min.css");
    }
  ];

  function run_inline_js() {
    
    if ((window.Bokeh !== undefined) || (force === true)) {
      for (var i = 0; i &lt; inline_js.length; i++) {
        inline_js[i](window.Bokeh);
      }if (force === true) {
        display_loaded();
      }} else if (Date.now() &lt; window._bokeh_timeout) {
      setTimeout(run_inline_js, 100);
    } else if (!window._bokeh_failed_load) {
      console.log("Bokeh: BokehJS failed to load within specified timeout.");
      window._bokeh_failed_load = true;
    } else if (force !== true) {
      var cell = $(document.getElementById("7aaedfca-192f-401d-9126-5cef16e709a5")).parents('.cell').data().cell;
      cell.output_area.append_execute_result(NB_LOAD_WARNING)
    }

  }

  if (window._bokeh_is_loading === 0) {
    console.log("Bokeh: BokehJS loaded, going straight to plotting");
    run_inline_js();
  } else {
    load_libs(js_urls, function() {
      console.log("Bokeh: BokehJS plotting callback run at", now());
      run_inline_js();
    });
  }
}(this));
&lt;/script&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="output_area"&gt;
&lt;div class="prompt output_prompt"&gt;Out[2]:&lt;/div&gt;
&lt;div class="output_text output_subarea output_execute_result"&gt;
&lt;pre&gt;'0.12.4'&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h1 id="Define-Rossler-System"&gt;Define Rossler System&lt;a class="anchor-link" href="#Define-Rossler-System"&gt;¶&lt;/a&gt;&lt;/h1&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [3]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;rossler&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;z&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;0.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;0.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;5.7&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;x_dot&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;z&lt;/span&gt;
    &lt;span class="n"&gt;y_dot&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;
    &lt;span class="n"&gt;z_dot&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;z&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;x_dot&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y_dot&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;z_dot&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [4]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;dt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;0.05&lt;/span&gt;
&lt;span class="n"&gt;stepCnt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1000&lt;/span&gt;

&lt;span class="c1"&gt;# Need one more for the initial values&lt;/span&gt;
&lt;span class="n"&gt;xs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;empty&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;stepCnt&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,))&lt;/span&gt;
&lt;span class="n"&gt;ys&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;empty&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;stepCnt&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,))&lt;/span&gt;
&lt;span class="n"&gt;zs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;empty&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;stepCnt&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [5]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Setting initial values&lt;/span&gt;
&lt;span class="n"&gt;xs&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;ys&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;zs&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;1.&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;1.05&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [6]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Stepping through "time".&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;stepCnt&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="c1"&gt;# Derivatives of the X, Y, Z state&lt;/span&gt;
    &lt;span class="n"&gt;x_dot&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y_dot&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;z_dot&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rossler&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;xs&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;ys&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;zs&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
    &lt;span class="n"&gt;xs&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;xs&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x_dot&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;dt&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;ys&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ys&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;y_dot&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;dt&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;zs&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;zs&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;z_dot&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;dt&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h1 id="Plot"&gt;Plot&lt;a class="anchor-link" href="#Plot"&gt;¶&lt;/a&gt;&lt;/h1&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [7]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tools&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'reset,save'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'Rossler Attractor'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="n"&gt;x_axis_label&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"X Axis"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="n"&gt;y_axis_label&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"Y Axis"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;scatter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;xs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;ys&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;
&lt;div class="output_area"&gt;
&lt;div class="prompt"&gt;&lt;/div&gt;
&lt;div class="output_html rendered_html output_subarea "&gt;
&lt;div class="bk-root"&gt;
&lt;div class="bk-plotdiv" id="80674e27-51fd-4ffe-a7e5-49e73d1dde94"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;script type="text/javascript"&gt;
  
  (function(global) {
    function now() {
      return new Date();
    }
  
    var force = false;
  
    if (typeof (window._bokeh_onload_callbacks) === "undefined" || force === true) {
      window._bokeh_onload_callbacks = [];
      window._bokeh_is_loading = undefined;
    }
  
  
    
    if (typeof (window._bokeh_timeout) === "undefined" || force === true) {
      window._bokeh_timeout = Date.now() + 0;
      window._bokeh_failed_load = false;
    }
  
    var NB_LOAD_WARNING = {'data': {'text/html':
       "&lt;div style='background-color: #fdd'&gt;\n"+
       "&lt;p&gt;\n"+
       "BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \n"+
       "may be due to a slow or bad network connection. Possible fixes:\n"+
       "&lt;/p&gt;\n"+
       "&lt;ul&gt;\n"+
       "&lt;li&gt;re-rerun `output_notebook()` to attempt to load from CDN again, or&lt;/li&gt;\n"+
       "&lt;li&gt;use INLINE resources instead, as so:&lt;/li&gt;\n"+
       "&lt;/ul&gt;\n"+
       "&lt;code&gt;\n"+
       "from bokeh.resources import INLINE\n"+
       "output_notebook(resources=INLINE)\n"+
       "&lt;/code&gt;\n"+
       "&lt;/div&gt;"}};
  
    function display_loaded() {
      if (window.Bokeh !== undefined) {
        document.getElementById("80674e27-51fd-4ffe-a7e5-49e73d1dde94").textContent = "BokehJS successfully loaded.";
      } else if (Date.now() &lt; window._bokeh_timeout) {
        setTimeout(display_loaded, 100)
      }
    }
  
    function run_callbacks() {
      window._bokeh_onload_callbacks.forEach(function(callback) { callback() });
      delete window._bokeh_onload_callbacks
      console.info("Bokeh: all callbacks have finished");
    }
  
    function load_libs(js_urls, callback) {
      window._bokeh_onload_callbacks.push(callback);
      if (window._bokeh_is_loading &gt; 0) {
        console.log("Bokeh: BokehJS is being loaded, scheduling callback at", now());
        return null;
      }
      if (js_urls == null || js_urls.length === 0) {
        run_callbacks();
        return null;
      }
      console.log("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
      window._bokeh_is_loading = js_urls.length;
      for (var i = 0; i &lt; js_urls.length; i++) {
        var url = js_urls[i];
        var s = document.createElement('script');
        s.src = url;
        s.async = false;
        s.onreadystatechange = s.onload = function() {
          window._bokeh_is_loading--;
          if (window._bokeh_is_loading === 0) {
            console.log("Bokeh: all BokehJS libraries loaded");
            run_callbacks()
          }
        };
        s.onerror = function() {
          console.warn("failed to load library " + url);
        };
        console.log("Bokeh: injecting script tag for BokehJS library: ", url);
        document.getElementsByTagName("head")[0].appendChild(s);
      }
    };var element = document.getElementById("80674e27-51fd-4ffe-a7e5-49e73d1dde94");
    if (element == null) {
      console.log("Bokeh: ERROR: autoload.js configured with elementid '80674e27-51fd-4ffe-a7e5-49e73d1dde94' but no matching script tag was found. ")
      return false;
    }
  
    var js_urls = [];
  
    var inline_js = [
      function(Bokeh) {
        (function() {
          var fn = function() {
            var docs_json = {"97cfc9a5-4b97-4fc0-b30c-026c008ad64f":{"roots":{"references":[{"attributes":{},"id":"63133b07-8b97-493f-b9f7-b490c55233dd","type":"BasicTickFormatter"},{"attributes":{"axis_label":"X Axis","formatter":{"id":"63133b07-8b97-493f-b9f7-b490c55233dd","type":"BasicTickFormatter"},"plot":{"id":"f7146be1-e9da-48ef-a7c1-038470ad019c","subtype":"Figure","type":"Plot"},"ticker":{"id":"3c31e1e4-1a81-4556-ab32-aec8c43b69a3","type":"BasicTicker"}},"id":"5a6d2ec7-708a-4bd6-8bf9-b581d46d08a6","type":"LinearAxis"},{"attributes":{"data_source":{"id":"52bdfd41-b8f4-41c0-ac4c-24d12bad077e","type":"ColumnDataSource"},"glyph":{"id":"51c73ed0-2b5d-4396-8e04-176206846825","type":"Circle"},"hover_glyph":null,"nonselection_glyph":{"id":"a5d0bc65-9cf8-43f3-94e3-0ffa412c3209","type":"Circle"},"selection_glyph":null},"id":"71c2b0b8-14c4-484e-9b1a-a228b20693db","type":"GlyphRenderer"},{"attributes":{"plot":{"id":"f7146be1-e9da-48ef-a7c1-038470ad019c","subtype":"Figure","type":"Plot"},"ticker":{"id":"3c31e1e4-1a81-4556-ab32-aec8c43b69a3","type":"BasicTicker"}},"id":"76327aa8-1494-4bff-944c-4008fddbf29d","type":"Grid"},{"attributes":{"axis_label":"Y Axis","formatter":{"id":"9f2a1698-64e9-4d97-b1d1-86165b9f18a5","type":"BasicTickFormatter"},"plot":{"id":"f7146be1-e9da-48ef-a7c1-038470ad019c","subtype":"Figure","type":"Plot"},"ticker":{"id":"296ddf3b-43b7-4334-b6fc-ffbe49522c6f","type":"BasicTicker"}},"id":"dbc5a496-4138-4899-baca-4bd1507f905f","type":"LinearAxis"},{"attributes":{},"id":"296ddf3b-43b7-4334-b6fc-ffbe49522c6f","type":"BasicTicker"},{"attributes":{"dimension":1,"plot":{"id":"f7146be1-e9da-48ef-a7c1-038470ad019c","subtype":"Figure","type":"Plot"},"ticker":{"id":"296ddf3b-43b7-4334-b6fc-ffbe49522c6f","type":"BasicTicker"}},"id":"055ee386-0b02-4229-b843-224f352150ca","type":"Grid"},{"attributes":{"fill_color":{"value":"#1f77b4"},"line_color":{"value":"#1f77b4"},"x":{"field":"x"},"y":{"field":"y"}},"id":"51c73ed0-2b5d-4396-8e04-176206846825","type":"Circle"},{"attributes":{"plot":{"id":"f7146be1-e9da-48ef-a7c1-038470ad019c","subtype":"Figure","type":"Plot"}},"id":"a07c1b49-240b-4f59-a560-799cc6946fac","type":"ResetTool"},{"attributes":{},"id":"9f2a1698-64e9-4d97-b1d1-86165b9f18a5","type":"BasicTickFormatter"},{"attributes":{"active_drag":"auto","active_scroll":"auto","active_tap":"auto","tools":[{"id":"a07c1b49-240b-4f59-a560-799cc6946fac","type":"ResetTool"},{"id":"c90d4454-19df-4de6-bf59-33e7e60d4341","type":"SaveTool"}]},"id":"53ecee39-fff3-4d76-b5fc-00dae240da1b","type":"Toolbar"},{"attributes":{"below":[{"id":"5a6d2ec7-708a-4bd6-8bf9-b581d46d08a6","type":"LinearAxis"}],"left":[{"id":"dbc5a496-4138-4899-baca-4bd1507f905f","type":"LinearAxis"}],"renderers":[{"id":"5a6d2ec7-708a-4bd6-8bf9-b581d46d08a6","type":"LinearAxis"},{"id":"76327aa8-1494-4bff-944c-4008fddbf29d","type":"Grid"},{"id":"dbc5a496-4138-4899-baca-4bd1507f905f","type":"LinearAxis"},{"id":"055ee386-0b02-4229-b843-224f352150ca","type":"Grid"},{"id":"71c2b0b8-14c4-484e-9b1a-a228b20693db","type":"GlyphRenderer"}],"title":{"id":"d6aa3a8a-f1ea-46e0-8b86-36c1be653891","type":"Title"},"tool_events":{"id":"686d31b5-ce2a-4643-9262-6746891c6f8a","type":"ToolEvents"},"toolbar":{"id":"53ecee39-fff3-4d76-b5fc-00dae240da1b","type":"Toolbar"},"x_range":{"id":"ebaac88b-846d-4331-9796-5e4641a9c4b5","type":"DataRange1d"},"y_range":{"id":"805c6091-22b8-4808-984f-363e92df4eab","type":"DataRange1d"}},"id":"f7146be1-e9da-48ef-a7c1-038470ad019c","subtype":"Figure","type":"Plot"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#1f77b4"},"line_alpha":{"value":0.1},"line_color":{"value":"#1f77b4"},"x":{"field":"x"},"y":{"field":"y"}},"id":"a5d0bc65-9cf8-43f3-94e3-0ffa412c3209","type":"Circle"},{"attributes":{"callback":null,"column_names":["x","y"],"data":{"x":{"__ndarray__":"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","dtype":"float64","shape":[1001]},"y":{"__ndarray__":"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","dtype":"float64","shape":[1001]}}},"id":"52bdfd41-b8f4-41c0-ac4c-24d12bad077e","type":"ColumnDataSource"},{"attributes":{"plot":{"id":"f7146be1-e9da-48ef-a7c1-038470ad019c","subtype":"Figure","type":"Plot"}},"id":"c90d4454-19df-4de6-bf59-33e7e60d4341","type":"SaveTool"},{"attributes":{"plot":null,"text":"Rossler Attractor"},"id":"d6aa3a8a-f1ea-46e0-8b86-36c1be653891","type":"Title"},{"attributes":{"callback":null},"id":"ebaac88b-846d-4331-9796-5e4641a9c4b5","type":"DataRange1d"},{"attributes":{"callback":null},"id":"805c6091-22b8-4808-984f-363e92df4eab","type":"DataRange1d"},{"attributes":{},"id":"3c31e1e4-1a81-4556-ab32-aec8c43b69a3","type":"BasicTicker"},{"attributes":{},"id":"686d31b5-ce2a-4643-9262-6746891c6f8a","type":"ToolEvents"}],"root_ids":["f7146be1-e9da-48ef-a7c1-038470ad019c"]},"title":"Bokeh Application","version":"0.12.4"}};
            var render_items = [{"docid":"97cfc9a5-4b97-4fc0-b30c-026c008ad64f","elementid":"80674e27-51fd-4ffe-a7e5-49e73d1dde94","modelid":"f7146be1-e9da-48ef-a7c1-038470ad019c"}];
            
            Bokeh.embed.embed_items(docs_json, render_items);
          };
          if (document.readyState != "loading") fn();
          else document.addEventListener("DOMContentLoaded", fn);
        })();
      },
      function(Bokeh) {
      }
    ];
  
    function run_inline_js() {
      
      if ((window.Bokeh !== undefined) || (force === true)) {
        for (var i = 0; i &lt; inline_js.length; i++) {
          inline_js[i](window.Bokeh);
        }if (force === true) {
          display_loaded();
        }} else if (Date.now() &lt; window._bokeh_timeout) {
        setTimeout(run_inline_js, 100);
      } else if (!window._bokeh_failed_load) {
        console.log("Bokeh: BokehJS failed to load within specified timeout.");
        window._bokeh_failed_load = true;
      } else if (force !== true) {
        var cell = $(document.getElementById("80674e27-51fd-4ffe-a7e5-49e73d1dde94")).parents('.cell').data().cell;
        cell.output_area.append_execute_result(NB_LOAD_WARNING)
      }
  
    }
  
    if (window._bokeh_is_loading === 0) {
      console.log("Bokeh: BokehJS loaded, going straight to plotting");
      run_inline_js();
    } else {
      load_libs(js_urls, function() {
        console.log("Bokeh: BokehJS plotting callback run at", now());
        run_inline_js();
      });
    }
  }(this));
&lt;/script&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;script type="text/javascript"&gt;if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
&lt;/script&gt;
</summary><category term="Math"></category><category term="Physics"></category><category term="Thesis"></category></entry><entry><title>Abstracting Networking with Docker Containers</title><link href="http://doctimjones.org/abstracting-networking-with-docker-containers.html" rel="alternate"></link><published>2016-03-03T00:23:00-05:00</published><updated>2016-03-03T00:23:00-05:00</updated><author><name>Tim Jones</name></author><id>tag:doctimjones.org,2016-03-03:abstracting-networking-with-docker-containers.html</id><summary type="html">&lt;h4&gt;Goal&lt;/h4&gt;
&lt;p&gt;Network Namespace is a Linux tool that allows for the easy virtualization of network models. While it has plenty of &lt;a href="http://blog.scottlowe.org/2013/09/04/introducing-linux-network-namespaces/"&gt;practical uses directly on the hardware&lt;/a&gt;, this will be a quick introduction to how it can be used to create more complex Docker networks that could be extended to modeling, say, the infrastructure of a data center or cloud provider.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/brandon-rhodes/fopnp/tree/m/playground"&gt;Brandon Rhodes created&lt;/a&gt; a great "playground" for his book &lt;a href="https://github.com/brandon-rhodes/fopnp"&gt;Foundations of Python Network Programming&lt;/a&gt;. Inspired by this example, we will create a small simple netns/docker example that is more bite-sized for those who aren't familiar with these tools. &lt;/p&gt;
&lt;h4&gt;What is NetNS?&lt;/h4&gt;
&lt;p&gt;Very briefly, netns is a tool that allows us to create virtual network namespaces that are isolated from each other. &lt;/p&gt;
&lt;p&gt;Let's let its man page speak for itself:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A network namespace is logically another copy of the network stack, with its own routes, firewall rules, and network devices.&lt;/p&gt;
&lt;p&gt;By default a process inherits its network namespace from its parent.Initially all the processes share the same default network namespace from the init process.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;One's imagination can fly away at this point thinking of the multitude of possibilities this offers for security, but that should be a focus of a separate entry.&lt;/p&gt;
&lt;p&gt;Creating a new namespace, here let's call it newtonsapple for the sake of example, is as easy as &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ip netns add newtonsapple
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Of course there is much, much more to it than that, but we will see more details about what netns can do below.&lt;/p&gt;
&lt;h4&gt;What is Docker?&lt;/h4&gt;
&lt;p&gt;Chances are pretty high that if you found this page, you have a pretty good idea of what Docker is. I will put it in the context of our netns discussion. In some ways, Docker is to the OS what netns is the machine's networking configuration. Docker is a way to run processes in an isolated environment that does not use virtualization of hardware, but rather has direct access to the hardware via having direct access to the kernel. There are plenty of places out there that will provide fantastic introductions to Docker, but for the sake of this entry, it helps to think of netns and Docker as sort of cousins in that they both create isolated sandboxes which can interact in controlled ways with the &lt;em&gt;real&lt;/em&gt; OS/network outside of their bubbles (in the case of Docker this bubble is called a &lt;strong&gt;container&lt;/strong&gt; and in case of netns this bubble is called a &lt;strong&gt;namespace&lt;/strong&gt;). &lt;/p&gt;
&lt;h6&gt;Docker Networking&lt;/h6&gt;
&lt;p&gt;Docker has a great &lt;a href="https://docs.docker.com/engine/userguide/networking/"&gt;tutorial on Docker Networking&lt;/a&gt; and it would be inefficient to recreate that here in any way. Instead I want to highlight the key parts that are relevant to this entry. &lt;/p&gt;
&lt;p&gt;The first thing to note is that Docker automatically creates its own network. If you do an &lt;code&gt;ifconfig&lt;/code&gt; or an &lt;code&gt;ip a&lt;/code&gt; on a machine running a Docker server, you will find an entry corresponding to this network listed in the output:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;docker0   Link encap:Ethernet  HWaddr 56:84:7a:fe:97:99  
          inet addr:172.17.42.1  Bcast:0.0.0.0  Mask:255.255.0.0
 ...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Docker also creates a network internal to each container (loopback) and you can launch a container that hooks directly in to the host network (&lt;code&gt;docker run --net=host&lt;/code&gt;). The default is to launch it on the docker0 network, though it is often useful to run it on the host network if, for example, it needs access to VPN connections and it isn't worth the effort to create further bridges. However, an interesting option is &lt;code&gt;--net=none&lt;/code&gt;. This tells Docker to not touch the networking of the container and allows us to create our own networking for the containers.&lt;/p&gt;
&lt;h4&gt;Using NetNS with Docker to Model Your Home Network&lt;/h4&gt;
&lt;h6&gt;Preliminary setup&lt;/h6&gt;
&lt;p&gt;This post will assume you are working from Ubuntu/Debian, though any Linux distribution will have these tools.&lt;/p&gt;
&lt;p&gt;On Ubuntu, you have to create a directory &lt;code&gt;/var/run/netns&lt;/code&gt; in order to use netns:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo mkdir -p /var/run/netns
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Though this wasn't my experience, you may have to enable two Linux kernel modules as well:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo modprobe ip_nat_ftp nf_conntrack_ftp
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You may also need to install bridge-utils if it isn't already installed:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get update
sudo apt-get install bridge-utils
&lt;/pre&gt;&lt;/div&gt;


&lt;h6&gt;Bringing up the containers and linking netns&lt;/h6&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="x"&gt;docker run --net=none --dns=8.8.8.8 --name=verizon -d ubuntu /bin/sh -c &amp;quot;while true; do echo &amp;quot;&amp;quot;; done&amp;quot;&lt;/span&gt;
&lt;span class="x"&gt;pid=$(docker inspect -f &amp;#39;&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt;&lt;span class="nv"&gt;.State.Pid&lt;/span&gt;&lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;&amp;#39; verizon)&lt;/span&gt;
&lt;span class="x"&gt;sudo ln -s /proc/$pid/ns/net /var/run/netns/verizon&lt;/span&gt;

&lt;span class="x"&gt;docker run --net=none --dns=8.8.8.8 --name=router -d ubuntu /bin/sh -c &amp;quot;while true; do echo &amp;quot;&amp;quot;; done&amp;quot;&lt;/span&gt;
&lt;span class="x"&gt;pid=$(docker inspect -f &amp;#39;&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt;&lt;span class="nv"&gt;.State.Pid&lt;/span&gt;&lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;&amp;#39; router)&lt;/span&gt;
&lt;span class="x"&gt;sudo ln -s /proc/$pid/ns/net /var/run/netns/router&lt;/span&gt;

&lt;span class="x"&gt;docker run --net=none --dns=8.8.8.8 --name=laptop -d ubuntu /bin/sh -c &amp;quot;while true; do echo &amp;quot;&amp;quot;; done&amp;quot;&lt;/span&gt;
&lt;span class="x"&gt;pid=$(docker inspect -f &amp;#39;&lt;/span&gt;&lt;span class="cp"&gt;{{&lt;/span&gt;&lt;span class="nv"&gt;.State.Pid&lt;/span&gt;&lt;span class="cp"&gt;}}&lt;/span&gt;&lt;span class="x"&gt;&amp;#39; laptop)&lt;/span&gt;
&lt;span class="x"&gt;sudo ln -s /proc/$pid/ns/net /var/run/netns/laptop&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h6&gt;Creating Network Interfaces&lt;/h6&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@vagrant-ubuntu-trusty-64:~/code# ip netns exec verizon ip link list
1: lo: &amp;lt;LOOPBACK,UP,LOWER_UP&amp;gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
10: eth1: &amp;lt;BROADCAST,MULTICAST&amp;gt; mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000
    link/ether f6:8b:e9:66:00:b0 brd ff:ff:ff:ff:ff:ff
root@vagrant-ubuntu-trusty-64:~/code# ip netns exec router ip link list                                                                                        
1: lo: &amp;lt;LOOPBACK,UP,LOWER_UP&amp;gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
4: eth1: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000
    link/ether 36:7a:68:d8:a5:84 brd ff:ff:ff:ff:ff:ff
9: eth0: &amp;lt;NO-CARRIER,BROADCAST,MULTICAST,UP&amp;gt; mtu 1500 qdisc pfifo_fast state DOWN mode DEFAULT group default qlen 1000
    link/ether fe:60:62:9d:1b:7b brd ff:ff:ff:ff:ff:ff
root@vagrant-ubuntu-trusty-64:~/code# ip netns exec laptop ip link list                                                                                        
1: lo: &amp;lt;LOOPBACK,UP,LOWER_UP&amp;gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
7: eth1: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000
    link/ether f2:ee:9e:56:55:d4 brd ff:ff:ff:ff:ff:ff
root@vagrant-ubuntu-trusty-64:~/code# brctl show
bridge name     bridge id               STP enabled     interfaces
docker0         8000.56847afe9799       no
home            8000.821c2640a1ea       no              laptop_eth1
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;### Create network namespaces
ip netns add levela
ip netns add levelb
ip netns add levelc

### Create peer devices
ip link add veth0a type veth peer name veth1a
ip link add veth0b type veth peer name veth1b
ip link add veth0c type veth peer name veth1c

### Put these devices in namespaces
# veth0a remains in globalspace
ip link set veth1a netns levela
ip link set veth0b netns levela
ip link set veth1b netns levelb
ip link set veth0c netns levelb
ip link set veth1c netns levelc

### Set up Networks
ip netns exec levela ifconfig veth1a 172.16.1.0/24 up
ip netns exec levelb ifconfig veth1b 10.1.1.1/24 up
ip netns exec levelc ifconfig veth1c 192.168.1.1/24 up
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;At thist point we should be able to observer network namespaces and corresponding devices with their networks:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# ip netns exec levela ip addr list

1: lo: &amp;lt;LOOPBACK&amp;gt; mtu 65536 qdisc noop state DOWN group default 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
6: veth1a: &amp;lt;NO-CARRIER,BROADCAST,MULTICAST,UP&amp;gt; mtu 1500 qdisc pfifo_fast state DOWN group default qlen 1000
    link/ether ba:8c:ec:6e:71:db brd ff:ff:ff:ff:ff:ff
    inet 172.16.1.0/24 brd 172.16.1.255 scope global veth1a
       valid_lft forever preferred_lft forever
9: veth0b: &amp;lt;BROADCAST,MULTICAST&amp;gt; mtu 1500 qdisc noop state DOWN group default qlen 1000
    link/ether 82:88:3d:09:e7:1f brd ff:ff:ff:ff:ff:ff

# ip netns exec levelb ip addr list

1: lo: &amp;lt;LOOPBACK&amp;gt; mtu 65536 qdisc noop state DOWN group default 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
8: veth1b: &amp;lt;NO-CARRIER,BROADCAST,MULTICAST,UP&amp;gt; mtu 1500 qdisc pfifo_fast state DOWN group default qlen 1000
    link/ether c2:c4:9c:2b:41:a5 brd ff:ff:ff:ff:ff:ff
    inet 10.1.1.1/24 brd 10.1.1.255 scope global veth1b
       valid_lft forever preferred_lft forever
11: veth0c: &amp;lt;BROADCAST,MULTICAST&amp;gt; mtu 1500 qdisc noop state DOWN group default qlen 1000
    link/ether 96:a5:1c:5b:e3:8c brd ff:ff:ff:ff:ff:ff

# ip netns exec levelc ip addr list

1: lo: &amp;lt;LOOPBACK&amp;gt; mtu 65536 qdisc noop state DOWN group default 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
10: veth1c: &amp;lt;NO-CARRIER,BROADCAST,MULTICAST,UP&amp;gt; mtu 1500 qdisc pfifo_fast state DOWN group default qlen 1000
    link/ether 66:d7:ff:9b:65:63 brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.1/24 brd 192.168.1.255 scope global veth1c
       valid_lft forever preferred_lft forever
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and corresponding routes:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# ip netns exec levela ip route list

172.16.1.0/24 dev veth1a  proto kernel  scope link  src 172.16.1.0 

# ip netns exec levelb ip route list

10.1.1.0/24 dev veth1b  proto kernel  scope link  src 10.1.1.1 

# ip netns exec levelc ip route list

192.168.1.0/24 dev veth1c  proto kernel  scope link  src 192.168.1.1 
&lt;/pre&gt;&lt;/div&gt;</summary><category term="DevOps"></category><category term="Docker"></category><category term="Linux"></category><category term="Networking"></category></entry></feed>